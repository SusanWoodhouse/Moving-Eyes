(this.webpackJsonp=this.webpackJsonp||[]).push([[60,56],{"/BrD":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return W})),n.d(t,"a",(function(){return Z}));var i,s=n("Gkqz"),a=n("QKml"),r=n("ZIGy"),o=n("q1tI"),h=n("/MKj"),l=n("TSYQ"),c=n.n(l),d=n("LvDl"),u=n("x+OS"),p=n("lAjK"),m=n("Yh64"),g=n("xlbG"),b=n("VPDm"),f=n("jpIK"),w=n("FL8F"),v=n("g0vd"),x=n("MOMi"),O=n("9L+2"),C=n("VM6C"),_=n("ftKm"),j=n("iZmR"),S=n("v1iL"),D=n("pyUj"),y=n("PxYM"),E=n("ha7/"),P=n("JRaF"),k=n("W6xo"),M=n("p2Ep"),A=n("nFsU"),I=n("4N86"),F=n("QcG9"),B=n("VGFk"),z=n("kUL8"),L=n("NZ9u"),V=n("IS7I");function R({checked:e,icon:t}){const n=c()(v.a.brush_shape_option,{[v.a.checked]:e});return o.createElement("div",{className:n},t)}!function(e){e.erase="erase",e.paint="paint"}(i||(i={}));const H=[{id:x.l.circle,icon:o.createElement(D.default,null)},{id:x.l.square,icon:o.createElement(A.default,null)},{id:x.l.triangle,icon:o.createElement(F.default,null)},{id:x.l.hexagon,icon:o.createElement(k.default,null)},{id:x.l.star,icon:o.createElement(I.default,null)},{id:x.l.heart,icon:o.createElement(P.default,null)},{id:x.l.wetbrush,icon:o.createElement(B.default,null)},{id:x.l.drybrush,icon:o.createElement(y.default,null)},{id:x.l.marker,icon:o.createElement(M.default,null)},{id:x.l.pencil,icon:o.createElement(E.default,null)}];const T=e=>2*e,W=e=>.5*e;class N extends o.PureComponent{constructor(){super(...arguments),this.handleChangeStrength=(e,t,n)=>{const i=Math.sign(this.props.brushAlpha);this.props.onChangeStrength(i,t)},this.onSliderDragStart=e=>{this.props.startMaskPreview(e.clientX,e.clientY)},this.endMaskPreview=()=>{this.props.endMaskPreview()},this.handleAnalyticsForDetailChange=(e,t)=>{const{brushShape:n,eraseChecked:s,commonEventData:r}=this.props;L.a.trackChange(this.props.pageSection,e,Object.assign({value:t,brush_shape:n,brush_type:this.props.activeBrush===a.a.default?s?i.erase:i.paint:s?i.paint:i.erase},r))},this.handleChangeBrush=()=>{const{onChangeBrush:e,noStrokes:t,doesBrushTargetEffectMask:n,effectId:i}=this.props;e(t,n,i)},this.renderBrushModeControls=()=>{const{eraseChecked:e,showBrushMode:t}=this.props;return t?o.createElement(g.a,{variant:b.c.underliner,label:e?Object(s.b)("editor","erase"):Object(s.b)("editor","brush"),name:"brush-mode",defaultTab:e?i.erase:i.paint,onChange:this.handleChangeBrush,tabs:[{label:o.createElement(u.default,null),key:i.erase},{label:o.createElement(p.default,null),key:i.paint}]}):null},this.handleChangeShape=e=>{this.props.onChangeShape(e)},this.renderShapeIconTrigger=(e,t,n)=>{const{brushShape:i}=this.props;let s=!t,a=n?(t,i)=>n(i,()=>this.handleChangeShape(e.id)):void 0;return e.id===x.l.circle&&(t=null,s=!1,a=()=>this.handleChangeShape(e.id)),o.createElement(O.a,{name:"shape",imageKey:e.id,value:i,isNew:s,badge:t,onClick:a},o.createElement(R,{icon:e.icon}))},this.renderShapeIcon=e=>{const t=Object(_.b)(_.a.proSubscriber,w.b.meta.noop(),S.b.brushShapesPaywall);return o.createElement(j.a,{key:e.id,paywall:t,trigger:Object(d.partial)(this.renderShapeIconTrigger,e),badgeClassName:v.a.pro_badge})},this.renderShapeGroup=()=>{const{isSdkProviderActive:e}=this.props,t=e?H.filter(e=>e.id===x.l.circle):H;return o.createElement(C.b,null,t.map(this.renderShapeIcon))},this.renderSpacingSlider=()=>{const{brushSpacing:e,onChangeSpacing:t,initialBrushValues:n,brushControlsContext:i}=this.props;return o.createElement(m.a,{name:"spacing",value:e,label:Object(s.b)("editorControls","brush_spacing"),featureSliderContext:i,min:0,max:200,step:1,formatter:r.a.roundedPercent,onChange:t,resetToValue:null==n?void 0:n.spacing,onSliderDragEnd:()=>this.handleAnalyticsForDetailChange("spacing_changed",e),onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("spacing_changed",e)})},this.renderRotationSlider=()=>{const{brushAngleDegrees:e,onChangeRotation:t,initialBrushValues:n,brushControlsContext:i}=this.props;return o.createElement(m.a,{name:"angleDegrees",value:e,label:Object(s.b)("editorControls","brush_rotation"),featureSliderContext:i,min:0,max:360,step:1,formatter:r.a.degrees,onChange:t,resetToValue:null==n?void 0:n.angleDegrees,onSliderDragEnd:()=>this.handleAnalyticsForDetailChange("rotation_changed",e),onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("rotation_changed",e)})},this.renderHardnessSlider=()=>{const{brushHardness:e,onChangeHardness:t,initialBrushValues:n,brushControlsContext:i}=this.props;return o.createElement(m.a,{name:"hardness",value:e,label:Object(s.b)("editorControls","brush_hardness"),featureSliderContext:i,min:1,max:100,step:1,formatter:r.a.roundedPercent,onChange:t,onSliderDragStart:this.onSliderDragStart,onSliderDragEnd:()=>{this.endMaskPreview(),this.handleAnalyticsForDetailChange("hardness_changed",e)},resetToValue:null==n?void 0:n.hardness,onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("hardness_changed",e)})},this.renderStrengthSlider=()=>{const{brushStrength:e,initialBrushValues:t,brushControlsContext:n}=this.props;return o.createElement(m.a,{name:"strength",value:e,label:Object(s.b)("editorControls","brush_strength"),featureSliderContext:n,min:1,max:100,step:1,formatter:r.a.roundedPercent,onChange:this.handleChangeStrength,onSliderDragStart:this.onSliderDragStart,onSliderDragEnd:()=>{this.endMaskPreview(),this.handleAnalyticsForDetailChange("strength_changed",e)},resetToValue:null==t?void 0:t.strength,onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("strength_changed",e)})},this.renderSizeSlider=()=>{const{brushSize:e,onChangeSize:t,maxBrushSize:n,initialBrushValues:i,brushControlsContext:a}=this.props;return o.createElement(m.a,{name:"diameter",value:e,label:Object(s.b)("core","size"),featureSliderContext:a,min:1,max:n||500,step:1,onChange:t,onSliderDragStart:this.onSliderDragStart,onSliderDragEnd:()=>{this.endMaskPreview(),this.handleAnalyticsForDetailChange("size_changed",e)},resetToValue:null==i?void 0:i.size,onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("size_changed",e)})},this.renderSliders=()=>{const{showStrengthSlider:e,showShapes:t,showHardnessSlider:n}=this.props;return o.createElement(o.Fragment,null,t&&this.renderShapeGroup(),this.renderSizeSlider(),n&&this.renderHardnessSlider(),e&&this.renderStrengthSlider(),t&&this.renderRotationSlider(),t&&this.renderSpacingSlider())}}componentDidMount(){const{activeBrush:e,initialBrushValues:t}=this.props;this.props.setActiveBrush(e),t&&this.updateBrushValues(t)}updateBrushValues(e){const{size:t,hardness:n,strength:i,shape:s,angleDegrees:a,spacing:r}=e;this.props.onChangeSize("size",t,!1),this.props.onChangeHardness("hardness",n,!1),this.props.onChangeStrength(Math.sign(i),i),this.props.showShapes&&this.props.onChangeShape(s),this.props.onChangeRotation("angleDegrees",a),this.props.onChangeSpacing("spacing",r)}render(){return o.createElement(o.Fragment,null,this.renderBrushModeControls(),this.renderSliders())}}function G(e,t,n){e(w.b.ux.setBrushDiameter(T(n)))}function U(e,t,n){e(w.b.ux.setBrushHardness(n/100))}N.defaultProps={activeBrush:a.a.default,brushControlsContext:"brush-controls",showBrushMode:!0,showHardnessSlider:!0,showStrengthSlider:!0,showShapes:!0};const Z=Object(z.c)(Object(V.a)(Object(h.b)((function(e){var t,n;const i=f.getActiveBrush(e),s=f.getCurBrushInfo(e),a=s.effect,r=f.doesBrushTargetEffectMask(e,a),o=f.getIsSdkProviderActive(e),h=i.props.color,l=Object(d.round)(function(e){return 100*Math.abs(e)/255}(h.a),2),c=Object(d.round)(100*i.props.hardness,2),{distance:u}=f.getCamera(e),p=W(i.props.diameter),m=i.props,g=m.spacing,b=m.angleDegrees,w=m.shape,v=s.eraseChecked;let x=0,O=null,C=null;a&&(x=r?a.mask.strokes.length:null!==(n=null===(t=a.attrs.strokes)||void 0===t?void 0:t.length)&&void 0!==n?n:0,O=a.id,C=a.type);const _=0===x;return{distance:u,brushColor:h,brushSize:p,brushHardness:c,brushStrength:l,brushSpacing:g,brushAngleDegrees:b,brushShape:w,brushAlpha:h.a,eraseChecked:v,noStrokes:_,effectId:O,effectType:C,doesBrushTargetEffectMask:r,isSdkProviderActive:o}}),(function(e){return{onChangeSize:Object(d.partial)(G,e),onChangeHardness:Object(d.partial)(U,e),onChangeStrength:(t,n)=>{const i=t*function(e){return e/100*255}(n);e(w.b.ux.setBrushStrength(i))},onChangeShape:t=>{const n=t===x.l.circle?x.m.softRoundBrush:x.m.shapedBrush;e(w.b.ux.changeBrushType(n)),e(w.b.ux.setBrushShape(t))},onChangeRotation:(t,n)=>{e(w.b.ux.setBrushRotation(n))},onChangeSpacing:(t,n)=>{e(w.b.ux.setBrushSpacing(n))},onChangeBrush:(t,n,i)=>{t&&n?e(w.b.scene.invertMask(i)):(e(w.b.ux.toggleBrushPolarity()),e(w.b.undo.softCommit()))},startMaskPreview:(t,n)=>{e(w.b.ux.startMaskPreview(t,n))},endMaskPreview:()=>{e(w.b.ux.endMaskPreview())},setActiveBrush:t=>{e(w.b.ux.setActiveBrush(t))}}}))(N)))},"4exy":function(e,t,n){"use strict";var i=n("JPst"),s=n.n(i)()((function(e){return e[1]}));s.push([e.i,'.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp{display:grid;grid-gap:0 10px;grid-template-columns:[edge-left] 80px [inner-left] auto [inner-right] 80px [edge-right] 37px;grid-template-rows:23px 30px}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp label{margin:0}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp button{padding:0;margin-left:5px;width:32px;height:32px}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp .src-editor-components-tool_bar-panels-basic_edits--crop-module-divider-iaN6c{height:30px;color:#0c121c;text-align:center;font-family:"Roboto","sans-serif";font-style:normal;font-weight:400;font-size:14px;letter-spacing:.2px;line-height:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;overflow:hidden;line-height:30px}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp input{width:100%}.src-editor-components-tool_bar-panels-basic_edits--crop-module-collage_input_error-bAZ4J{font-family:"Roboto","sans-serif";font-style:normal;font-weight:400;font-size:11px;letter-spacing:.2px;line-height:14px}',""]),s.locals={dimensions:"src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp",divider:"src-editor-components-tool_bar-panels-basic_edits--crop-module-divider-iaN6c",collage_input_error:"src-editor-components-tool_bar-panels-basic_edits--crop-module-collage_input_error-bAZ4J"},t.a=s},Eihm:function(e,t,n){"use strict";n.r(t),n.d(t,"CropPanel",(function(){return W})),n.d(t,"RotatePanel",(function(){return ie})),n.d(t,"ColorsFxPanel",(function(){return De})),n.d(t,"ExposureFxPanel",(function(){return Me})),n.d(t,"ResizePanel",(function(){return Ge})),n.d(t,"CurvesFxPanel",(function(){return Ue.default})),n.d(t,"LevelsFxPanel",(function(){return Mt})),n.d(t,"SharpenFxPanel",(function(){return zt})),n.d(t,"DodgeFxPanel",(function(){return $t})),n.d(t,"BurnFxPanel",(function(){return cn}));var i=n("Gkqz"),s=n("q1tI"),a=n("/MKj"),r=n("hrAu"),o=n("Jm8X"),h=n("3UhY"),l=n("U03b"),c=n("oTty"),d=n("FWLE"),u=n("8BZ1"),p=n("MP9G"),m=n("ribA"),g=n("FL8F"),b=n("rTxc"),f=n("8KIJ"),w=n("jpIK"),v=n("BZ7e"),x=n("SeV6"),O=n("LboF"),C=n.n(O),_=n("4exy"),j={insert:"head",singleton:!1},S=(C()(_.a,j),_.a.locals||{}),D=n("tLTz"),y=n("LC5x"),E=n("jqCj"),P=n("jyzh"),k=n("NVhL"),M=n("JUFo"),A=n("LvDl"),I=n("25As"),F=n("Hg4B"),B=n("3F5Q");const z=n("v/vF");function L(){return[Object(i.b)("toolBar","no_fixed_proportions"),Object(i.b)("toolBar","original_proportions"),...z.map(e=>Object(B.a)(e.name)),Object(i.b)("toolBar","width_x_height",{WIDTH:screen.width,HEIGHT:screen.height})]}function V(e,t){if(0===e)return 0;if(1===e)return v.a.x(t)/v.a.y(t);const n=z[e-2];return n.width/n.height}function R(e){return{presetIndex:0,width:""+e.width,height:""+e.height,targetSize:null}}class H extends s.Component{constructor(e){super(e),this.widthChange=e=>{const{maxHeight:t,maxWidth:n}=this.props;let i=e.target.value;if(this.isValidDimension(i)){i=Math.min(i,n);const e=T(this.state.presetIndex),s=V(this.state.presetIndex,this.props.documentSize);let a=s?Math.max(Math.round(i/s),1):this.props.height;if(a>t){const e=t/a;a=t,i=Math.round(i*e)}s||e?this.setState({width:""+i,height:""+a}):this.setState({width:""+i,height:""+a,presetIndex:0,targetSize:null}),this.props.setCropDimensions(i/a,v.a.create(i,a),!e,this.props.shouldConstrainCrop)}},this.heightChange=e=>{const{maxHeight:t,maxWidth:n}=this.props;let i=e.target.value;if(this.isValidDimension(i)){i=Math.min(i,t);const e=T(this.state.presetIndex),s=V(this.state.presetIndex,this.props.documentSize);let a=s?Math.max(Math.round(i*s),1):this.props.width;if(a>n){const e=n/a;a=n,i=Math.round(i*e)}s||e?this.setState({width:""+a,height:""+i}):this.setState({width:""+a,height:""+i,presetIndex:0,targetSize:null}),this.props.setCropDimensions(a/i,v.a.create(a,i),!e,this.props.shouldConstrainCrop)}},this.onPresetSelect=e=>{const t=L(),n=parseInt(e,10);this.setState({presetIndex:n});let i=t[n];if(n<2&&(i=null),this.props.onPresetSelect(i),0===n)this.props.toggleCropRatioLock(!1);else if(1===n){const{dx:e,dy:t}=v.a.toSize(this.props.documentSize),n=e/t;this.props.setCropDimensions(n,null,!0,!0)}else if(n===t.length-1){const e=v.a.create(screen.width,screen.height),t=e[0]/e[1];this.props.setCropDimensions(t,null,!0,!0),this.setState({targetSize:e}),this.props.setScalePhoto(e)}else{const e=z[n-2],{width:t,height:i,scaleDocument:s}=e;this.props.setCropDimensions(t/i,null,!0,!0);const a=s?v.a.create(t,i):null;this.setState({targetSize:a}),this.props.setScalePhoto(a)}},this.toggleScalePhoto=(e,t=!1)=>{!t&&this.onPresetSelect("0");const n=t?v.a.create(this.props.width,this.props.height):null;this.setState({targetSize:n}),this.props.setScalePhoto(n),this.props.toggleCropRatioLock(t)},this.onOpen=()=>{this.setState(R(this.props)),this.props.onOpen()},this.getMaxWidth=()=>this.state.targetSize?Object(I.j)():this.props.maxWidth,this.getMaxHeight=()=>this.state.targetSize?Object(I.j)():this.props.maxHeight,this.state=R(e)}componentDidUpdate(e){e.width===this.props.width&&e.height===this.props.height||this.setState({width:""+this.props.width,height:""+this.props.height})}isValidDimension(e){const t=parseInt(e,10);return""+t===e&&null!=t&&t>0}render(){const{onApply:e,flipCropBox:t,shouldConstrainCrop:n}=this.props,a=L();return s.createElement(r.a,{title:Object(i.b)("tools","crop_canvas"),panelId:F.b.crop,onOpen:this.onOpen,onApply:e,layerEffectType:y.a.global},s.createElement(f.b,{label:Object(i.b)("toolBar","aspect_ratio"),onChange:this.onPresetSelect,name:"cropPresets"},a.map((e,t)=>s.createElement(p.b,{key:t,selected:t===this.state.presetIndex,value:t,label:e}))),s.createElement(o.a,null,s.createElement("div",{className:S.dimensions},s.createElement(h.a,{htmlFor:"txtCropWidth"},Object(i.b)("toolBar","width")),s.createElement("div",null),s.createElement(h.a,{htmlFor:"txtCropHeight"},Object(i.b)("toolBar","height")),s.createElement("div",null),s.createElement(l.a,{name:"txtCropWidth",value:this.state.width,onChange:this.widthChange,maxValue:this.getMaxWidth(),units:D.b.pixels,shouldUpdateValueWhileFocused:!0,shouldAllowZerosAtStart:!1}),s.createElement("div",{className:S.divider},"✕"),s.createElement(l.a,{name:"txtCropHeight",value:this.state.height,onChange:this.heightChange,maxValue:this.getMaxHeight(),units:D.b.pixels,shouldUpdateValueWhileFocused:!0,shouldAllowZerosAtStart:!1}),s.createElement(u.a,{for:"btn-crop-rotate",text:Object(i.b)("toolBar","rotate_crop"),offset:{dx:0,dy:-3}}),s.createElement(d.a,{id:"btn-crop-rotate",onClick:Object(A.partial)(t,n)},s.createElement(x.default,null)))),s.createElement(c.b,{name:"scalePhoto",label:Object(i.b)("toolBar","scale_photo"),value:null!==this.state.targetSize,onChange:this.toggleScalePhoto}))}}function T(e){return 0===e}var W=Object(a.b)((function(e){const t=Object(w.getCropSelection)(e);let n=v.a.zeroes;t&&(n=t.targetSize||Object(w.getCropSelectionSize)(e));const i=Math.round(v.a.dx(n)),s=Math.round(v.a.dy(n)),a=Object(w.getDocumentSize)(e),r=Object(w.getBackgroundNode)(e);let o;r&&(o=Object(w.getNodeBounds)(e,r.id));const h=o||E.g.fromSize(v.a.create(Object(I.j)(),Object(I.j)()),v.a.zeroes),l=Object(k.getCropSelectionBounds)(e.scene),c=!!o&&Object(k.backgroundCoversCanvas)(o,a);let d=Object(I.j)(),u=Object(I.j)();const p=c&&!Object(M.lb)(r);return p&&l&&(d=Object(P.c)(l,h),u=Object(P.b)(l,h)),{width:i,height:s,documentSize:a,maxWidth:Math.round(d),maxHeight:Math.round(u),shouldConstrainCrop:p}}),(function(e){return{onOpen:()=>{e(Object(m.updateEditMode)(b.a.canvasCrop))},onApply:()=>{e(g.b.scene.applyCrop())},setCropDimensions:(t,n,i,s)=>{e(g.b.scene.setCropDimensions(t,n,i,s))},toggleCropRatioLock:t=>{e(g.b.scene.setCropLock(t))},flipCropBox:t=>{e(g.b.scene.flipCropBox(t))},setScalePhoto:t=>{e(g.b.scene.setCropTargetSize(t))},onPresetSelect:t=>{e(g.b.sagas.setCropPreset(t))}}}))(H),N=n("Yh64"),G=n("gjD4"),U=n("TUER"),Z=n("91J9"),q=n("C0xJ"),J=n("Xnc83"),X=n("SPKF");const K={shouldShowGrid:!1,angle:0};function Y(e){return Q(e).toString()+"º"}function Q(e){return Math.round(e)/100}function $(e,t,n){const i=n?0:1;return-1*e.A[i]===t.A[i]&&-1*e.B[i]===t.B[i]&&-1*e.C[i]===t.C[i]&&-1*e.D[i]===t.D[i]}function ee(e,t){return!!Object(A.inRange)(e,-t,t)||Math.abs(Math.abs(e)-Math.abs(t))<.01}class te extends s.Component{constructor(e){super(e),this.state=Object.assign({},K),this.onOpen=()=>{this.setState(Object.assign(Object.assign({},K),{shouldShowGrid:this.props.shouldShowGrid})),this.props.onOpen()},this.handleStraightenChange=(e,t,n)=>{t/=100;const{angle:i}=this.state,s=t-i;this.setState({angle:t},()=>{const e=s*Math.PI/180;this.props.straightenDocument(e),n&&this.props.commit()})},this.onStraightenDragEnd=()=>{this.props.onStraightenDragEnd(this.state.shouldShowGrid)},this.initialAngle=e.documentAngle}componentDidUpdate(e,t){const{targetRect:n,documentAngle:i}=this.props,s=Math.round(i-e.documentAngle);if(s&&s%90==0||!e.targetRect||!n)return;let a=t.angle;const r=i-this.initialAngle,o=$(e.targetRect,n,!0),h=$(e.targetRect,n,!1);o||h?a*=-1:ee(r,5)?a=r:ee(r-90,5)?a=r-90:ee(r-180,5)?a=r-180:ee(r-270,5)?a=r-270:ee(r+90,5)&&(a=r+90),a!==t.angle&&this.setState({angle:a})}render(){const{onApply:e,onStraightenDragStart:t,rotateLeft:n,rotateRight:a,flipHorizontal:o,flipVertical:h}=this.props,l=Q(100*this.state.angle*100);return s.createElement(r.a,{title:Object(i.b)("editor","rotate_canvas"),panelId:F.b.rotate,onOpen:this.onOpen,onApply:e,layerEffectType:y.a.transform},s.createElement(u.a,{for:"canvas_rotate_left"},Object(i.b)("editor","rotate_counterclockwise")),s.createElement(u.a,{for:"canvas_rotate_right"},Object(i.b)("editor","rotate_clockwise")),s.createElement(u.a,{for:"canvas_flip_horizontal"},Object(i.b)("editor","flip_horizontally")),s.createElement(u.a,{for:"canvas_flip_vertical"},Object(i.b)("editor","flip_vertically")),s.createElement(G.a,null,s.createElement(q.default,{id:"canvas_rotate_left",name:"rotateLeft",onClick:n}),s.createElement(Z.default,{id:"canvas_rotate_right",name:"rotateRight",onClick:a}),s.createElement(J.default,{id:"canvas_flip_horizontal",name:"flipHorizontal",onClick:o}),s.createElement(X.default,{id:"canvas_flip_vertical",name:"flipVertical",onClick:h})),s.createElement(N.a,{name:"straighten",label:Object(i.b)("editor","straighten"),onChange:this.handleStraightenChange,value:l,min:-500,max:500,step:.01,formatter:Y,onSliderDragStart:t,onSliderDragEnd:this.onStraightenDragEnd,precision:100}))}}const ne={shouldShowGrid:!1,documentAngle:0,targetRect:E.g.unitRect};var ie=Object(a.b)((function(e){if(!(null!=e.ux.panelSelected&&"rotate"===e.ux.panelSelected.panelId))return ne;const t=w.getShowGrid(e),n=Object(U.a)(w.getDocumentAngle(e)),i=w.getBackgroundId(e);return{shouldShowGrid:t,documentAngle:n,targetRect:i?w.getNodeHoverBounds(e,i):null}}),(function(e){return{rotateLeft:()=>{e(g.b.scene.rotateLeft()),e(g.b.undo.softCommit())},rotateRight:()=>{e(g.b.scene.rotateRight()),e(g.b.undo.softCommit())},flipHorizontal:()=>{e(Object(g.d)(g.b.scene.flipHorizontal())),e(g.b.undo.softCommit())},flipVertical:()=>{e(Object(g.d)(g.b.scene.flipVertical())),e(g.b.undo.softCommit())},straightenDocument:t=>{0!==t&&e(Object(g.d)(g.b.scene.straightenDocument(t)))},onOpen:()=>e(g.b.editor.updateEditMode(b.a.rotate)),onApply:()=>{e(g.b.ux.applyPanel()),e(g.b.scene.centerDocument())},commit:()=>e(g.b.undo.softCommit()),onStraightenDragStart:()=>{e(g.b.editor.hideGrid()),e(g.b.scene.showStraighteningGrid())},onStraightenDragEnd:t=>{e(g.b.scene.hideStraighteningGrid()),t&&e(g.b.editor.showGrid())}}}))(te),se=n("bBtN"),ae=n("4sIT"),re=n("2dk7"),oe=n("MOMi"),he=n("ZIGy"),le=n("W5vt"),ce=n("e9FX"),de=n("NvXt"),ue=n("YGRI"),pe=n("TSYQ"),me=n.n(pe),ge=n("LhdP"),be=n("1Kt6"),fe=n("b340"),we=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const ve=F.b.colors;function xe(e){return re.wb(e,-100,100,0,1)}function Oe(e){return re.wb(e,0,1,-100,100)}function Ce(e){return re.wb(e,-100,100,0,1)}function _e(e){return re.wb(e,0,1,-100,100)}class je extends s.PureComponent{constructor(){super(...arguments),this.state={decoded:null,rgb:re.sb},this.refInput=null,this.histogramReady=()=>{const{histograms:e}=this.props;return!!e&&!e.updating},this.setRefInput=e=>{this.refInput=e},this.whiteBalanceClick=()=>{const{isMaskPaletteOpen:e,isPicking:t,toggleMaskPalette:n,toggleWhiteBalancePicker:i}=this.props;e&&n(),t?this.unbindEventListeners():this.bindEventListeners(),i(!t,this.state.decoded)},this.updateTint=(e,t,n)=>this.props.updateFxAttr(e,t,n),this.autoAdjustClick=()=>{const{isPicking:e}=this.props;e&&this.whiteBalanceClick();const{histograms:t}=this.props;if(!t||t.updating)return;const n=Object(ge.c)(t.green),i=Object(ge.c)(t.blue),s=Object(ge.c)(t.red),a=re.Cb(s/255,n/255*2-1,i/255*2-1,1),r=re.Bb(a),o=re.k(r);this.props.updateFxAttr("tint",Math.round(100*o.tint),!1),this.props.updateFxAttr("temperature",Math.round(100*o.temperature),!1),this.setState({rgb:r}),this.props.commit()},this.updateFxColor=e=>{const t=re.k(e);this.props.updateFxAttr("temperature",Math.round(100*t.temperature),!1),this.props.updateFxAttr("tint",Math.round(100*t.tint),!1),this.props.commit()},this.handleSliderChange=(e,t,n=!0)=>{this.props.isPicking&&this.whiteBalanceClick(),this.props.updateFxAttr(e,t,n)},this.onChangeComplete=e=>{this.updateFxColor(e)},this.handleMouseUp=e=>{e.preventDefault(),e.stopPropagation();const t=this.props.neutralColor||re.sb;Object(re.E)(re.qb,t)||this.setState({rgb:t})},this.colorDisplayComponent=()=>{const e=!this.histogramReady(),t=me()(de.a.eyedropper,{[de.a.active]:this.props.isPicking,[de.a.disabled]:e}),n=this.state.rgb;return s.createElement(o.a,null,s.createElement("div",{className:de.a.picker_label},Object(i.b)("toolBar","white_balance_picker")),s.createElement("div",{className:de.a.color_display},s.createElement(le.a,{color:n,selected:!1,showSelection:!1}),s.createElement("div",null,` ${re.v(Object.assign(Object.assign({},n),{a:255}))} `),s.createElement("div",{className:t,onClick:e?void 0:this.whiteBalanceClick},s.createElement(ce.default,null))))}}componentWillUnmount(){this.unbindEventListeners()}bindEventListeners(){window.addEventListener("mouseup",this.handleMouseUp)}unbindEventListeners(){window.removeEventListener("mouseup",this.handleMouseUp)}render(){const e=this.props,{uiFxAttrs:t,updateFxAttr:n,neutralColor:a,isPicking:h,onOpen:l}=e,c=we(e,["uiFxAttrs","updateFxAttr","neutralColor","isPicking","onOpen"]);return s.createElement(r.a,Object.assign({},c,{title:Object(i.b)("core","colors"),panelId:ve,showMaskButton:!0,onOpen:l}),s.createElement(o.a,null,s.createElement(d.i,{style:{width:"100%"},name:"btnAutoAdjust",renderAsDisabledWhenClicked:!0,onClick:this.autoAdjustClick,disabled:!this.histogramReady(),label:Object(i.b)("toolBar","auto_adjust_colors")})),this.colorDisplayComponent(),s.createElement(ue.b,{name:"temperature",value:Ce(t.temperature),label:Object(i.b)("effect","temperature"),variant:ue.a.temperatureSlider,onChange:e=>this.handleSliderChange("temperature",_e(e),!1),onChangeComplete:e=>this.handleSliderChange("temperature",_e(e))}),s.createElement(ue.b,{name:"tint",value:xe(t.tint),label:Object(i.b)("effect","tint"),variant:ue.a.tintSlider,onChange:e=>this.handleSliderChange("tint",Oe(e),!1),onChangeComplete:e=>this.handleSliderChange("tint",Oe(e))}),s.createElement(be.a,null),s.createElement(fe.a,{name:"saturation",label:Object(i.b)("editor","saturation"),min:-100,max:100,onChange:this.handleSliderChange,formatter:he.a.roundedPercent}),s.createElement(fe.a,{name:"vibrance",label:Object(i.b)("effect","vibrance"),min:-100,max:100,onChange:this.handleSliderChange,formatter:he.a.roundedPercent}),s.createElement(fe.a,{name:"fade",label:Object(i.b)("effect","fade"),min:0,max:100,onChange:this.handleSliderChange,formatter:he.a.roundedPercent}))}}const Se=Object(a.b)((function(e){return{neutralColor:e.ux.eyedropper.originalColor,isPicking:w.getEditMode(e)===b.a.sampleColor,histograms:w.getHistograms(e,re.b.YUV),docSize:w.getDocumentSize(e),isMaskPaletteOpen:w.getMasksPaletteVisible(e)}}),(function(e,t){return{toggleWhiteBalancePicker:(t,n)=>{t?(e(g.b.ux.setEyedropperToken("whiteBalance")),e(g.b.editor.updateEditMode(b.a.sampleColor))):e(g.b.editor.updateEditMode(b.a.effect))},onApply:()=>{e(g.b.editor.updateEditMode(b.a.effect)),e(g.b.scene.clearHistograms()),t.onApply()},toggleMaskPalette:()=>e(g.b.ux.togglePalette(b.b.masks))}}))(je);var De=Object(se.a)(Se,{effectType:oe.r.ColorsYUV,panelId:ve,fxAttrDefaults:ae.b,getUiFxAttrs:function({temperature:e,tint:t}){return{temperature:e,tint:t}}}),ye=n("+Q43"),Ee=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const Pe=F.c.exposure;class ke extends s.PureComponent{constructor(){super(...arguments),this.updateAttr=(e,t,n)=>{this.props.updateFxAttr(e,t,n)},this.autoAdjustClick=()=>{this.props.updateFxAttr("auto",!0,!0)}}render(){const e=this.props,{uiFxAttrs:t,onOpen:n,isLoading:a}=e,h=Ee(e,["uiFxAttrs","onOpen","isLoading"]);return s.createElement(r.a,Object.assign({},h,{title:Object(i.b)("effect","exposure"),panelId:Pe,showMaskButton:!0,onOpen:n,isLoading:a}),s.createElement(o.a,null,s.createElement(d.i,{style:{width:"100%",whiteSpace:"normal"},name:"btnAutoAdjust",onClick:this.autoAdjustClick,disabled:a,label:Object(i.b)("effect","auto_adjust_exposure")})),s.createElement(fe.a,{name:"brightness",label:Object(i.b)("effect","brightness"),min:-100,max:100,onChange:this.props.updateFxAttr,formatter:he.a.roundedPercent}),s.createElement(fe.a,{key:"highlights",name:"highlights",label:Object(i.b)("effect","highlights"),min:-100,max:100,onChange:this.updateAttr,formatter:he.a.roundedPercent}),s.createElement(fe.a,{key:"midtones",name:"midtones",label:Object(i.b)("effect","mid_tones"),min:-100,max:100,onChange:this.updateAttr,formatter:he.a.roundedPercent}),s.createElement(fe.a,{key:"shadows",name:"shadows",label:Object(i.b)("effect","shadows"),min:-100,max:100,onChange:this.updateAttr,formatter:he.a.roundedPercent}),s.createElement(fe.a,{name:"contrast",label:Object(i.b)("effect","contrast"),min:-100,max:100,onChange:this.props.updateFxAttr,formatter:he.a.roundedPercent}))}}var Me=Object(se.a)(ke,{effectType:oe.r.RelativeExposure,panelId:Pe,fxAttrDefaults:ye.b}),Ae=n("uwDm"),Ie=n("N66u"),Fe=n("Odgp"),Be=n("BaYo"),ze=n("z5cc"),Le=n("/cmf"),Ve=n("q5w7");const Re=F.b.resize;function He(e){const{width:t,height:n}=e,i=Object(I.j)();return{width:t,height:n,maxWidth:i,maxHeight:i,usePercentage:!1,lockProportions:!0,lastInputChange:null,originalSize:v.a.zeroes,originalMinWidth:ze.e,originalMinHeight:ze.e,originalAspectRatio:0,isEditing:!1,isCollageInputValid:!0}}const Te=Object(i.b)("editor","collage_min_size_px_error",{WIDTH:Le.c,HEIGHT:Le.c});class We extends s.Component{constructor(){super(...arguments),this.state=He(this.props),this.onOpen=()=>{this.setState((e,t)=>{const{width:n,height:i,minWidth:s,minHeight:a,onOpen:r}=t;r();const o=n/i,h=v.a.create(n,i);return Object.assign(Object.assign({},He(t)),{width:n,height:i,originalSize:h,originalMinWidth:s,originalMinHeight:a,originalAspectRatio:o})})},this.setSizeNoDebounce=()=>{const{width:e,height:t,originalMinWidth:n,originalMinHeight:i}=this.state,s=v.a.max(v.a.create(e,t),v.a.create(n,i)),a=v.a.divide(s,v.a.create(this.props.width,this.props.height));this.resize(s,a)},this.setSizeDebounced=Object(A.debounce)(this.setSizeNoDebounce,Be.u),this.setSize=()=>this.props.instantUpdate?this.setSizeNoDebounce():this.setSizeDebounced(),this.resize=(e,t)=>{this.props.resizeDocumentAndNodes(e),this.props.rerasterize(this.props.nodeIds)},this.toggleLockProportions=()=>{this.setState((e,t)=>{let{width:n,height:i}=e;const{lastInputChange:s}=e,a=!e.lockProportions;return a&&("width"===s?({width:n,height:i}=this.calcLockedHeightForWidth(n)):"height"===s&&({width:n,height:i}=this.calcLockedWidthForHeight(i))),Object.assign(Object.assign({},e),{lockProportions:a,width:n,height:i,isEditing:!0})},()=>{this.state.lockProportions&&this.setSize()})},this.calcPercentageFromValue=(e,t)=>{const{originalSize:n}=this.state,[i,s]=n;let a=t?e/i*100:e/s*100;return a=Math.round(a),a},this.calcValuefromPercentage=(e,t)=>{const{originalSize:n}=this.state,[i,s]=n;let a=t?i*e/100:s*e/100;return a=Math.round(a)<1?1:Math.round(a),a},this.togglePercentage=(e,t)=>{this.setState((e,n)=>Object.assign(Object.assign({},e),{usePercentage:t}))},this.parseInput=(e,t)=>{const n=parseInt(e,10);if(isNaN(n))return null;const{usePercentage:i,maxWidth:s,maxHeight:a}=this.state,r=i?this.calcValuefromPercentage(n,t):n;return Math.min(r,t?s:a)},this.setInput=(e,t=!1)=>{const n=e.target.value;if(!this.isInputValid(n))return;if(""===n)return void this.setInputState(-1,t);const{originalMinWidth:i,originalMinHeight:s}=this.state,a=this.parseInput(n,t);!a||a<(t?i:s)||this.setInputState(a,t)},this.setInputState=(e,t=!1)=>{this.setState((n,i)=>{let s=t?e:n.width,a=t?n.height:e;return n.lockProportions&&-1!==e&&({width:s,height:a}=t?this.calcLockedHeightForWidth(s):this.calcLockedWidthForHeight(a)),Object.assign(Object.assign({},n),{width:s,height:a,lastInputChange:t?"width":"height",isEditing:!0})},this.setSize)},this.handleApply=()=>{this.setSizeNoDebounce(),this.props.onApply()},this.isDimensionValid=()=>{const{width:e,height:t}=this.state,n=Math.min(e,t);return this.props.isCollage?n>=Le.c:n>=ze.e},this.onBlur=()=>{const{isCollage:e}=this.props,{width:t,height:n}=this.state;-1===t&&this.setInputState(n),-1===n&&this.setInputState(t,!0),e&&this.setState({isCollageInputValid:this.isDimensionValid()})},this.sanitizeValue=(e,t)=>{if(-1===e)return"";const{usePercentage:n}=this.state;return Math.ceil(n?this.calcPercentageFromValue(e,t):e)}}static getDerivedStateFromProps(e,t){return t.isEditing?t.width===e.width&&t.height===e.height?{isEditing:!1}:null:{width:e.width,height:e.height}}calcLockedHeightForWidth(e){const{originalAspectRatio:t,originalMinHeight:n,maxHeight:i}=this.state;let s=Math.max(Math.round(e/t),ze.e);return s>i?(s=i,e=Math.round(s*t)):s<n&&(s=n,e=Math.round(s*t)),{width:e,height:s}}calcLockedWidthForHeight(e){const{originalAspectRatio:t,originalMinWidth:n,maxWidth:i}=this.state;let s=Math.max(Math.round(e*t),ze.e);return s>i?(s=i,e=Math.round(s/t)):s<n&&(s=n,e=Math.round(s/t)),{width:s,height:e}}isInputValid(e){if(""===e)return!0;const t=parseInt(e,10);return""+t===e&&t>0}render(){const{width:e,height:t,usePercentage:n,lockProportions:a,isCollageInputValid:l}=this.state,p=n?D.b.percent:D.b.pixels;return s.createElement(r.a,{title:Object(i.b)("editor","resize_canvas"),panelId:Re,onOpen:this.onOpen,onApply:this.handleApply,layerEffectType:y.a.transform},!l&&s.createElement("div",{className:S.collage_input_error},Te),s.createElement(o.a,null,s.createElement("div",{className:S.dimensions},s.createElement(h.a,{htmlFor:"txtCropWidth"},Object(i.b)("toolBar","width")),s.createElement("div",null),s.createElement(h.a,{htmlFor:"txtCropHeight"},Object(i.b)("toolBar","height")),s.createElement("div",null),s.createElement(Ve.b,{name:"txtResizeWidth",value:this.sanitizeValue(e,!0),onBlur:this.onBlur,onChange:Object(A.partialRight)(this.setInput,!0),shouldSelectAllOnFocus:!0,units:p}),s.createElement("div",{className:S.divider},"✕"),s.createElement(Ve.b,{name:"txtResizeHeight",value:this.sanitizeValue(t,!1),onBlur:this.onBlur,onChange:this.setInput,shouldSelectAllOnFocus:!0,units:p}),s.createElement(u.a,{for:"btn-keep-proportions",text:Object(i.b)("toolBar","keep_proportions"),offset:{dx:0,dy:-3},hideOnClick:!1}),s.createElement(d.b,{id:"btn-keep-proportions",on:!1,onClick:this.toggleLockProportions},a?s.createElement(Ie.default,null):s.createElement(Fe.default,null)))),s.createElement(c.b,{name:"percentage",label:Object(i.b)("toolBar","use_percentages"),onChange:this.togglePercentage,value:n}))}}const Ne={width:0,height:0,minWidth:ze.e,minHeight:ze.e,nodeIds:Ae.a,isCollage:!1};var Ge=Object(a.b)((function(e){const{ux:t}=e;return null!==t.panelSelected&&t.panelSelected.panelId===Re?function(e){const{dx:t,dy:n}=v.a.toSize(w.getDocumentSize(e));return{width:t,height:n,minWidth:ze.e,minHeight:ze.e,nodeIds:w.getAllTransformableNodeIds(e),isCollage:w.getIsDocumentCollage(e)}}(e):Ne}),(function(e){return{resizeDocumentAndNodes:t=>{e(g.b.sagas.undoCurFrame()),e(g.b.scene.resizeDocumentAndNodes(t))},rerasterize:t=>e(g.b.sagas.rerasterize(t)),onOpen:()=>e(g.b.editor.updateEditMode(b.a.resize)),onApply:()=>e(g.b.undo.commit())}}))(We),Ue=n("wynV"),Ze=n("CBY8"),qe=n("hI7s"),Je=n("ExzR"),Xe=n("mz6l"),Ke=n("42cK"),Ye=n("xzCO");const Qe=[0,255];class $e extends Xe.a{render(){const{values:e}=this.state;return s.createElement("div",{style:{width:"100%"}},s.createElement(Ze.c,{mode:2,step:1,domain:Qe,className:Object(A.compact)([Ye.a.slider,this.props.className]).join(" "),onUpdate:this.onUpdate,onChange:this.onChange,values:e},s.createElement(Ze.b,null,qe.a),s.createElement(Ze.a,null,Object(A.partial)(Je.a,Qe,this.onMouseDown))))}}const et=Object(Ke.b)($e,Ke.a);var tt=n("L+5l"),nt=n("W78M");const it=[0,255];class st extends Xe.a{render(){const{values:e}=this.state;return s.createElement("div",{style:{width:"100%"}},s.createElement(Ze.c,{mode:2,step:1,domain:it,className:Object(A.compact)([Ye.a.slider,Ye.a.inputSlider]).join(" "),onUpdate:this.onUpdate,onChange:this.onChange,values:e},s.createElement(Ze.b,null,qe.a),s.createElement(Ze.a,null,Object(A.partial)(Je.a,it,this.onMouseDown)),s.createElement(Ze.d,{values:[127.5]},tt.a)))}}class at extends s.PureComponent{renderValue(){const{values:e,formatter:t=he.a.rounded}=this.props;return s.createElement("div",null,s.createElement("div",{className:nt.a.leftValue},t(e[0])),s.createElement("div",{className:nt.a.non_pcc_value},t(e[2])))}render(){return s.createElement("div",{className:me()(nt.a.labeledSlider,nt.a.outputLabel),"data-values":this.props.values.reduce((e,t)=>`${e}-${t}`,"").slice(1)},s.createElement("div",null,this.props.children),s.createElement("div",null,this.renderValue()))}}const rt=Object(Ke.b)(st,at);var ot=n("gH0B"),ht={insert:"head",singleton:!1},lt=(C()(ot.a,ht),ot.a.locals||{}),ct=n("9LwQ"),dt=n("8pJm"),ut=n("wHal");const pt=Object(re.eb)(60,60,60);class mt extends s.Component{constructor(){super(...arguments),this.setCanvas=e=>{if(e){this.canvas=e;try{this.ctx=e.getContext("2d")}catch(t){}}}}componentDidMount(){this.props.histograms&&(this.setCanvasScale(),this.drawHistogram())}componentDidUpdate(e){Object(A.isEqual)(e,this.props)||this.props.histograms&&this.drawHistogram()}setCanvasScale(){const e=Object(dt.a)();this.ctx&&this.ctx.scale(e,e)}getCanvasSize(){return v.a.toSize(v.a.create(parseInt(lt.canvas_width,10)||1,parseInt(lt.canvas_height,10)||1))}drawHistogram(){if(this.ctx&&this.props.histograms.length>0){const e=this.getCanvasSize();!function(e,t){e.clearRect(0,0,t.dx,t.dy)}(this.ctx,e),function(e,t,n,i,s){const a=function(e,t){return function(n){return(n=Object(ut.a)(n,0,t))/t*e.dy}}(t,s);for(let r=0;r<t.dx;r+=.25){const s=r/t.dx*255;let o=Array(n.length);const h=Math.floor(s),l=Math.ceil(s);for(let e=0;e<n.length;e++){const t=n[e][h],r=n[e][l],c=Object(ct.a)(t,r,s-h);o[e]={value:a(c),color:i[e]}}o=o.sort((e,t)=>t.value-e.value),o.length>1&&(o[1].color=Object(re.m)(o[0].color,o[1].color)),o.length>2&&(o[2].color=pt);for(let n=0;n<o.length;n++)e.beginPath(),e.lineWidth=.25,e.strokeStyle=Object(re.v)(o[n].color),e.moveTo(r,t.dy),e.lineTo(r,t.dy-o[n].value),e.stroke()}}(this.ctx,e,this.props.histograms,this.props.colors,this.props.maxScale)}}render(){const e=this.getCanvasSize();return s.createElement("canvas",{className:lt.canvas_style,ref:this.setCanvas,width:Object(dt.a)()*e.dx,height:Object(dt.a)()*e.dy})}}var gt=mt;function bt(e,t){const n=Array(t.length);for(let i=0;i<n.length;i++)n[i]=0;for(let i=0;i<t.length;i++){n[e(i)]+=t[i]}return n}var ft=n("rH2R");function wt(e,t,n,i,s,a=!0,r=255){const o=Object(ft.a)(n);return e/=r,i/=r,t/=r,s/=r,function(n){return n/=r,n=(Object(ut.a)(n,e,t)-e)/(t-e),n=Math.pow(n,o),n=Object(ut.a)(n,i,s),n*=r,a?Math.round(n):n}}function vt(e,t){const n=[];return e.forEach(e=>{for(let i=0;i<e.length;i++)n.push(e[i]),n.sort((e,t)=>t-e),n.length>t&&(n.length=t)}),n[n.length-1]}var xt=n("LtTe"),Ot=n("DlAU");const Ct=Object.assign({},xt.g),_t=[re.lb,re.ib,re.db],jt=F.c.levels,St=["red","green","blue"],Dt={autoMonochrome:{perChannel:!1,neutralMidtones:!1},autoMonochromePreserveMidtones:{perChannel:!1,neutralMidtones:!0},autoPerColor:{perChannel:!0,neutralMidtones:!1},autoPerColorPreserveMidtones:{perChannel:!0,neutralMidtones:!0}};class yt extends s.PureComponent{constructor(e){let t,n;if(super(e),this.updateMinInput=e=>{e=Object(ut.a)(e,0,this.valuesForChannel().maxInput),this.updateVecValue({minInput:e})},this.updateMaxInput=e=>{e=Object(ut.a)(e,this.valuesForChannel().minInput,255),this.updateVecValue({maxInput:e})},this.updateMidPoint=e=>{const{minInput:t,maxInput:n}=this.valuesForChannel();e=((e=Object(ut.a)(e,t,n))-t)/(n-t),this.updateVecValue({midPoint:e})},this.inputsOnChange=e=>this.handleInputsChanged(e,!0),this.inputsOnValuesUpdated=e=>this.handleInputsChanged(e,!1),this.updateMinOutput=e=>{e=Object(ut.a)(e,0,this.valuesForChannel().maxOutput),this.updateVecValue({minOutput:e})},this.updateMaxOutput=e=>{e=Object(ut.a)(e,this.valuesForChannel().minOutput,255),this.updateVecValue({maxOutput:e})},this.outputsOnChange=e=>this.handleOutputsChanged(e,!0),this.outputsOnValuesUpdated=e=>this.handleOutputsChanged(e,!1),this.updatePreset=e=>{if(this.props.updateFxAttr("preset",e,!1),"custom"===e)return;this.reset();const t=Dt[e],{histograms:n}=this.props;t&&n&&!n.updating&&(t.perChannel?(this.setChannelLevels("red",Object(Ot.a)([n.red.histogram],t.neutralMidtones)),this.setChannelLevels("green",Object(Ot.a)([n.green.histogram],t.neutralMidtones)),this.setChannelLevels("blue",Object(Ot.a)([n.blue.histogram],t.neutralMidtones))):this.setChannelLevels("rgb",Object(Ot.a)([n.red.histogram,n.green.histogram,n.blue.histogram],t.neutralMidtones))),this.props.commit()},this.updateChannel=e=>{this.props.updateFxAttr("channel",e,!0)},e.histograms&&this.histogramReady(e.histograms)){const{red:i,green:s,blue:a}=e.histograms;n=vt([i.histogram,s.histogram,a.histogram],10),t=this.mapHistograms(e.histograms,e.uiFxAttrs)}this.state={mappedHistograms:t,maxScale:n}}updateVecValue(e,t=null){const{uiFxAttrs:n}=this.props;let i=n[t=t||n.channel||"rgb"];i=Object.assign(Object.assign({},i),e),this.props.updateFxAttr("preset","custom",!1),this.props.updateFxAttr(t,i,!1)}scaledMidPoint(){const{midPoint:e,maxInput:t,minInput:n}=this.valuesForChannel();return Math.round(e*(t-n)+n)}handleInputsChanged(e,t){this.valuesForChannel().minInput!==e[0]?this.updateMinInput(e[0]):this.valuesForChannel().maxInput!==e[2]?this.updateMaxInput(e[2]):this.scaledMidPoint()!==e[1]&&this.updateMidPoint(e[1]),t&&this.props.commit()}handleOutputsChanged(e,t){this.valuesForChannel().minOutput!==e[0]?this.updateMinOutput(e[0]):this.valuesForChannel().maxOutput!==e[1]&&this.updateMaxOutput(e[1]),t&&this.props.commit()}valuesForChannel(){const e=Object.assign(Object.assign({},Ct),this.props.uiFxAttrs),t=e.channel||"rgb";return Object.assign(Object.assign({},e[t]),{channel:t})}componentDidUpdate(e){if(this.props.histograms&&!Object(A.isEqual)(e,this.props)&&this.histogramReady(this.props.histograms)&&(this.setState({mappedHistograms:this.mapHistograms(this.props.histograms,this.props.uiFxAttrs)}),!Object(A.isEqual)(e.histograms,this.props.histograms))){const{red:e,green:t,blue:n}=this.props.histograms||{};this.setState({maxScale:vt([e.histogram,t.histogram,n.histogram],10)})}}mapHistograms(e,t){if(!e)return null;if(!t.rgb)return null;const{minInput:n,maxInput:i,midPoint:s,minOutput:a,maxOutput:r}=t.rgb,o=wt(n,i,s,a,r);return St.map(n=>{const i=t[n];let s=e[n].histogram;if(i&&s){const{minInput:e,maxInput:t,midPoint:n,minOutput:a,maxOutput:r}=i;return s=bt(wt(e,t,n,a,r),s),s=bt(o,s),s}return[]})}histogramReady(e){return!!e&&!e.updating}setChannelLevels(e,t){let n=this.props.uiFxAttrs[e];n=Object.assign(Object.assign({},n),t),this.props.updateFxAttr(e,n,!1)}reset(){this.props.updateFxAttr("rgb",xt.f,!1),this.props.updateFxAttr("red",xt.f,!1),this.props.updateFxAttr("green",xt.f,!1),this.props.updateFxAttr("blue",xt.f,!1),this.props.updateFxAttr("channel","rgb",!1),this.props.commit()}histogramProps(e){const t=this.state.maxScale||1,n=_t,{mappedHistograms:i}=this.state;if(i){if("rgb"===e)return{histograms:i,colors:n,maxScale:t};{const s=St.indexOf(e);return{histograms:[i[s]],colors:[n[s]],maxScale:t}}}return{histograms:[],colors:n,maxScale:t}}render(){const{channel:e,minInput:t,maxInput:n,minOutput:a,maxOutput:o}=this.valuesForChannel(),h=this.props.uiFxAttrs.preset,l=this.scaledMidPoint(),c=(()=>({rgb:Object(i.b)("effect","rgb"),red:Object(i.b)("effect","red"),green:Object(i.b)("effect","green"),blue:Object(i.b)("effect","blue")}))(),d=(()=>({none:Object(i.b)("core","none"),custom:Object(i.b)("effect","custom_preset"),autoMonochrome:Object(i.b)("effect","auto_monochrome"),autoMonochromePreserveMidtones:"- "+Object(i.b)("effect","mono_preserve_mids"),autoPerColor:Object(i.b)("effect","auto_per_color"),autoPerColorPreserveMidtones:"- "+Object(i.b)("effect","color_preserve_mids")}))();return s.createElement(r.a,Object.assign({},this.props,{title:Object(i.b)("effect","levels"),panelId:jt,showMaskButton:!0}),s.createElement(f.b,{label:Object(i.b)("effect","presets"),onChange:this.updatePreset,disabled:!this.state.mappedHistograms},Object(A.keys)(d).map((e,t)=>{const n=d[e];return s.createElement(p.b,{key:t,selected:e===h,value:e,label:n,id:e,shouldShowOverflowTooltip:!0})})),s.createElement(f.b,{label:Object(i.b)("effect","channel"),isRow:!0,onChange:this.updateChannel},Object(A.keys)(c).map((t,n)=>s.createElement(p.b,{key:t,selected:t===e,value:t,label:c[t]}))),s.createElement(gt,Object.assign({},this.histogramProps(e))),s.createElement(rt,{label:Object(i.b)("effect","inputs"),key:"inputs",min:0,max:255,values:[t,l,n],onUpdate:this.inputsOnValuesUpdated,onChange:this.inputsOnChange}),s.createElement(et,{label:Object(i.b)("effect","outputs"),key:"outputs",min:0,max:255,values:[a,o],onUpdate:this.outputsOnValuesUpdated,onChange:this.outputsOnChange}))}}const Et={effectType:oe.r.Levels,panelId:jt,fxAttrDefaults:Ct,getUiFxAttrs:function(e){return e}},Pt=Object(se.b)(Et);const kt=Object(se.c)(Et);var Mt=Object(a.b)((function(e){return Object.assign(Object.assign({},kt(e)),{histograms:w.getHistograms(e,re.b.RGB)})}),(function(e,t){return Object.assign({},Pt(e,t))}))(yt),At=n("WXY0"),It=n("GZZW"),Ft=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const Bt=F.c.sharpen;var zt=Object(se.a)((function(e){var{uiFxAttrs:t,updateFxAttr:n}=e,a=Ft(e,["uiFxAttrs","updateFxAttr"]);return s.createElement(r.a,Object.assign({},a,{title:Object(i.b)("effect","sharpen"),panelId:Bt,showMaskButton:!0}),s.createElement(fe.a,{name:"radius",label:Object(i.b)("effect","radius"),min:1,max:128,onChange:n}),s.createElement(fe.a,{name:"strength",label:Object(i.b)("effect","strength"),min:0,max:400,formatter:he.a.roundedPercent,onChange:n,debounceWaitMS:20}),s.createElement(fe.a,{name:"clarity",label:Object(i.b)("effect","clarity"),min:0,max:It.i,onChange:n,debounceWaitMS:20}),s.createElement(fe.a,{name:"fade",label:Object(i.b)("effect","fade"),min:It.m,max:It.d,formatter:he.a.roundedPercent,onChange:n}))}),{effectType:oe.r.UnsharpMaskV2,panelId:Bt,fxAttrDefaults:At.b}),Lt=n("AXy9"),Vt=n("/BrD"),Rt=n("QKml"),Ht=n("xlbG"),Tt=n("VPDm"),Wt=n("x+OS"),Nt=n("l75k"),Gt=n("kUL8"),Ut=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const Zt=F.c.dodge,qt=Zt+"_brush_controls",Jt={low:Object(re.eb)(255,0,0,127),mid:Object(re.eb)(0,255,0,127),high:Object(re.eb)(0,0,255,127),erase:Object(re.eb)(255,255,255,255)},Xt=()=>[Object(i.b)("effect","shadows"),Object(i.b)("effect","midtones"),Object(i.b)("effect","highlights"),Object(i.b)("effect","brush_mode_erase")],Kt=e=>{const t=Object(re.bb)(e);return(()=>{const e=Xt();return{"255-0-0":e[0],"0-255-0":e[1],"0-0-255":e[2],"255-255-255":e[3]}})()[t]};function Yt(e,t){e(g.b.ux.setBrushColorNoAlpha(t))}const Qt=Object(a.b)((function(e){const{color:t}=w.getActiveBrush(e).props,n=w.getCurFx(e);let i=!0;if(null!=n){const t=w.getEffect(e,n.effectId);t&&(i=t.attrs.newCurves)}return{brushMode:Kt(t),newCurves:i}}),(function(e,t){return{updateBrush:t=>{const n="erase"===t?oe.k.reverseSubtract:oe.k.add;e(g.b.ux.setBrushBlendMode(n)),Yt(e,Jt[t])},onOpenPanel:()=>{e(g.b.ux.setActiveBrush(Rt.a.default)),e(g.b.ux.changeBrushType(oe.m.softDodgeBurnBrush)),Yt(e,Jt[Lt.b.preset]),t.onOpen()},onApply:()=>{e(g.b.ux.changeBrushType(oe.m.softRoundBrush)),t.onApply()}}}));var $t=Object(se.a)(Qt((function(e){var{updateBrush:t,onOpenPanel:n,onApply:a,brushMode:o,uiFxAttrs:h,updateFxAttr:l,documentSize:c}=e,d=Ut(e,["updateBrush","onOpenPanel","onApply","brushMode","uiFxAttrs","updateFxAttr","documentSize"]);const u=Xt();return s.createElement(r.a,Object.assign({},d,{onOpen:n,onApply:a,title:Object(i.b)("effect","dodge"),panelId:Zt,showMaskButton:!1}),s.createElement(Ht.a,{variant:Tt.c.underliner,name:"brush",onChange:t,defaultTab:"mid",label:o,tabs:[{key:"low",label:Object(i.b)("effect","low"),tooltip:u[0]},{key:"mid",label:Object(i.b)("effect","mid"),tooltip:u[1]},{key:"high",label:Object(i.b)("effect","high"),tooltip:u[2]},{key:"erase",label:s.createElement(Wt.default,null),tooltip:u[3]}]}),s.createElement(Gt.a,{sectionLabel:qt},s.createElement(Vt.a,{showBrushMode:!1,showShapes:!1,initialBrushValues:Object(Nt.b)(c,.05,50,100)})),s.createElement(be.a,null),s.createElement(fe.a,{name:"fade",label:Object(i.b)("effect","fade"),min:It.m,max:It.d,formatter:he.a.roundedPercent,onChange:l}))})),{effectType:oe.r.Dodge,panelId:Zt,fxAttrDefaults:Object.assign(Object.assign({},Lt.b),{newCurves:!0})}),en=n("cEys"),tn=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};const nn=F.c.burn,sn=nn+"_brush_controls",an={low:Object(re.eb)(255,0,0,127),mid:Object(re.eb)(0,255,0,127),high:Object(re.eb)(0,0,255,127),erase:Object(re.eb)(255,255,255,255)},rn=()=>[Object(i.b)("effect","shadows"),Object(i.b)("effect","midtones"),Object(i.b)("effect","highlights"),Object(i.b)("effect","brush_mode_erase")],on=e=>{const t=Object(re.bb)(e);return(()=>{const e=rn();return{"255-0-0":e[0],"0-255-0":e[1],"0-0-255":e[2],"255-255-255":e[3]}})()[t]};function hn(e,t){e(g.b.ux.setBrushColor(t))}const ln=Object(a.b)((function(e){const{color:t}=w.getActiveBrush(e).props,n=on(t),i=w.getCurFx(e);let s=!0;if(null!=i){const t=w.getEffect(e,i.effectId);t&&(s=t.attrs.newCurves)}return{brushMode:n,newCurves:s}}),(function(e,t){return{updateBrush:t=>{const n="erase"===t?oe.k.reverseSubtract:oe.k.add;e(g.b.ux.setBrushBlendMode(n)),hn(e,an[t])},onOpenPanel:()=>{e(g.b.ux.setActiveBrush(Rt.a.default)),e(g.b.ux.changeBrushType(oe.m.softDodgeBurnBrush)),hn(e,an[en.b.preset]),t.onOpen()},onApply:()=>{e(g.b.ux.changeBrushType(oe.m.softRoundBrush)),t.onApply()}}}))((function(e){var{updateBrush:t,onOpenPanel:n,onApply:a,brushMode:o,updateFxAttr:h,documentSize:l}=e,c=tn(e,["updateBrush","onOpenPanel","onApply","brushMode","updateFxAttr","documentSize"]);const d=rn();return s.createElement(r.a,Object.assign({},c,{onOpen:n,onApply:a,title:Object(i.b)("effect","burn"),panelId:nn,showMaskButton:!1}),s.createElement(Ht.a,{variant:Tt.c.underliner,name:"brush",defaultTab:"mid",label:o,onChange:t,tabs:[{key:"low",label:Object(i.b)("effect","low"),tooltip:d[0]},{key:"mid",label:Object(i.b)("effect","mid"),tooltip:d[1]},{key:"high",label:Object(i.b)("effect","high"),tooltip:d[2]},{key:"erase",label:s.createElement(Wt.default,null),tooltip:d[3]}]}),s.createElement(Gt.a,{sectionLabel:sn},s.createElement(Vt.a,{showBrushMode:!1,showShapes:!1,initialBrushValues:Object(Nt.b)(l,.05,50,100)})),s.createElement(be.a,null),s.createElement(fe.a,{name:"fade",label:Object(i.b)("effect","fade"),min:It.m,max:It.d,formatter:he.a.roundedPercent,onChange:h}))}));var cn=Object(se.a)(ln,{effectType:oe.r.Burn,panelId:nn,fxAttrDefaults:en.b})},Jm8X:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("q1tI"),s=n("dJhg");function a({children:e}){return i.createElement("div",{className:s.a.feature_row},e)}},N66u:function(e,t,n){"use strict";n.r(t);var i=n("q1tI");t.default=function(e){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 30 30"},e),i.createElement("g",null,i.createElement("path",{d:"M17.02081,12.272a1,1,0,1,0-1.41418,1.41425l1.41424,1.41431a1.00017,1.00017,0,0,1-.00006,1.41412l-6.364,6.364a1.00015,1.00015,0,0,1-1.41412.00012L7.12122,20.7572l.00012.00012a.99987.99987,0,0,1-.00014-1.414l.00014-.00014-.00012.00006,2.0252-2.0252a1,1,0,0,0-1.41418-1.41418L5,18.63605v2.82843L8.53552,25H11.364l7.7782-7.7782V14.39337Z"}),i.createElement("path",{d:"M21.46448,5H18.63605l-7.78137,7.78131v2.82843L12.976,17.73108a1,1,0,1,0,1.41425-1.41425l-1.41431-1.41424a1,1,0,0,1-.00006-1.414l6.36725-6.36731a1.00014,1.00014,0,0,1,1.41412-.00013l2.12152,2.12159-.00012-.00013a1,1,0,0,1,0,1.41421l0,0L20.85358,12.682a1,1,0,0,0,1.41418,1.41424L25,11.364V8.53552Z"})))}},NvXt:function(e,t,n){"use strict";var i=n("LboF"),s=n.n(i),a=n("ff8H"),r={insert:"head",singleton:!1};s()(a.a,r);t.a=a.a.locals||{}},Odgp:function(e,t,n){"use strict";n.r(t);var i=n("q1tI");t.default=function(e){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 30 30"},e),i.createElement("g",null,i.createElement("path",{d:"M9.4689,10.53027a.74992.74992,0,0,0,1.06265-1.05844l-.0021-.0021-3-3A.74992.74992,0,0,0,6.4668,7.52817l.0021.0021Z"}),i.createElement("path",{d:"M5.99917,13.75h3a.75.75,0,0,0,0-1.5h-3a.75.75,0,1,0,0,1.5Z"}),i.createElement("path",{d:"M13.55984,19.97485,10.656,22.87866a1.00015,1.00015,0,0,1-1.41412.00012L7.12039,20.7572l.00012.00012a.99989.99989,0,0,1-.00012-1.41406l.00012-.00012-.00012.00006,2.90393-2.90387a1,1,0,1,0-1.41425-1.41424l-3.6109,3.611v2.82843L8.5347,25h2.82843l3.6109-3.6109a1,1,0,1,0-1.41419-1.41425Z"}),i.createElement("path",{d:"M21.46365,5H18.63522l-3.6109,3.6109a1,1,0,0,0,1.41418,1.41419l2.90381-2.90381a1.00015,1.00015,0,0,1,1.41413-.00013L22.878,9.24274l-.00012-.00013a1,1,0,0,1,0,1.41421l0,0L19.974,13.56067a1,1,0,0,0,1.41424,1.41418l3.6109-3.6109V8.53552Z"}),i.createElement("path",{d:"M12.99917,9.75a.75018.75018,0,0,0,.75-.75V6a.75.75,0,0,0-1.5,0V9A.7502.7502,0,0,0,12.99917,9.75Z"}),i.createElement("path",{d:"M16.99917,20.25a.7502.7502,0,0,0-.75.75v3a.75.75,0,0,0,1.5,0V21A.75018.75018,0,0,0,16.99917,20.25Z"}),i.createElement("path",{d:"M23.99917,16.25h-3a.75.75,0,0,0,0,1.5h3a.75.75,0,0,0,0-1.5Z"}),i.createElement("path",{d:"M20.52945,19.46973a.74992.74992,0,0,0-1.06055,1.06054l3,3a.74992.74992,0,0,0,1.06055-1.06054Z"})))}},Qrk7:function(e,t,n){"use strict";var i=n("JPst"),s=n.n(i)()((function(e){return e[1]}));s.push([e.i,".src-editor-components-controls--brush_controls-module-brush_preview-QEFZA{pointer-events:none;position:fixed;z-index:210;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.src-editor-components-controls--brush_controls-module-brush_shape_option-21FT8{margin:auto;border-radius:50%;width:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#f3f4f5;fill:#85888f}.src-editor-components-controls--brush_controls-module-brush_shape_option-21FT8.src-editor-components-controls--brush_controls-module-checked-FDMo7{fill:#292f38}.src-editor-components-controls--brush_controls-module-pro_badge-EGaTZ{position:absolute;right:0px;top:-2px}",""]),s.locals={zindexCanvasTooltip:"10",brush_preview:"src-editor-components-controls--brush_controls-module-brush_preview-QEFZA",brush_shape_option:"src-editor-components-controls--brush_controls-module-brush_shape_option-21FT8",checked:"src-editor-components-controls--brush_controls-module-checked-FDMo7",pro_badge:"src-editor-components-controls--brush_controls-module-pro_badge-EGaTZ"},t.a=s},SeV6:function(e,t,n){"use strict";n.r(t);var i=n("q1tI");t.default=function(e){return i.createElement("svg",Object.assign({width:30,height:30},e),i.createElement("path",{d:"M24.003 6a1.001 1.001 0 0 0-1 1.001v2.006a9.936 9.936 0 0 0-2.954-2.632c-.007-.005-.01-.012-.017-.016-.007-.003-.014-.003-.02-.006a10 10 0 0 0-4.21-1.32l-.015-.004-.01.001a9.972 9.972 0 0 0-4.378.642l-.01.004-.004.001-.005.003a9.95 9.95 0 0 0-3.646 2.463c-.012.011-.027.015-.038.027-.01.011-.013.025-.023.037a10.013 10.013 0 0 0-1.817 2.75 10.182 10.182 0 0 0-.39 1.044c-.002.006-.007.01-.009.017-.003.01 0 .019-.003.028a9.91 9.91 0 0 0-.35 4.369c.002.016-.004.03-.002.045.002.014.01.024.013.038a9.431 9.431 0 0 0 1.54 3.99.942.942 0 0 0 .051.125.993.993 0 0 0 .123.14 9.935 9.935 0 0 0 2.263 2.341q.405.297.836.55l.024.014.002.002.006.002c.11.064.22.127.333.187a1.001 1.001 0 0 0 .942-1.767q-.148-.08-.293-.164-.345-.203-.67-.441a8.004 8.004 0 1 1 11.33-10.976l-2.407-.476a1.002 1.002 0 0 0-.388 1.965l5.002.99a1 1 0 0 0 1.194-.983V7.001a1 1 0 0 0-1-1.001zm-9.644 17a1.002 1.002 0 0 0-.161 1.997l.082.003a1.002 1.002 0 0 0 .079-2zm3.545-.522l-.01.004-.013.005a1.002 1.002 0 0 0 .36 1.936.991.991 0 0 0 .36-.067l.021-.008.01-.004a1.001 1.001 0 0 0-.728-1.866zm2.946-1.998a1 1 0 1 0 1.414-.05 1 1 0 0 0-1.413.05zm3.04-3.74a1.002 1.002 0 1 0 .657 1.255.999.999 0 0 0-.656-1.255z"}))}},cFMp:function(e,t,n){"use strict";var i=n("JPst"),s=n.n(i)()((function(e){return e[1]}));s.push([e.i,".src-editor-components-tool_bar-panels-effects--curves-module-curve_control_container-ELpW5 canvas{margin:10px 27px;border:2px solid #bebebe}",""]),s.locals={curve_control_width:"186px",curve_control_container:"src-editor-components-tool_bar-panels-effects--curves-module-curve_control_container-ELpW5"},t.a=s},ff8H:function(e,t,n){"use strict";var i=n("JPst"),s=n.n(i)()((function(e){return e[1]}));s.push([e.i,".src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(1){width:29px;height:29px;margin:-3px 9px 0px -2px}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(2){color:#85888f;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-left:5px;margin-top:4px}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(2) input{width:90px;height:30px}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(3){border:1px solid;border-color:#cacdd2;height:30px;width:30px}",""]),s.locals={color_display:"src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo"},t.a=s},g0vd:function(e,t,n){"use strict";var i=n("LboF"),s=n.n(i),a=n("Qrk7"),r={insert:"head",singleton:!1};s()(a.a,r);t.a=a.a.locals||{}},gH0B:function(e,t,n){"use strict";var i=n("JPst"),s=n.n(i)()((function(e){return e[1]}));s.push([e.i,".src-editor-components-tool_bar-controls--histogram-module-canvas_style-T6fRK{width:240px;height:100px;margin:8px 0;border:2px solid #ccc;background:-webkit-gradient(linear, left top, right top, from(#ccc), to(#fff));background:-o-linear-gradient(left, #ccc, #fff);background:linear-gradient(to right, #ccc, #fff)}",""]),s.locals={canvas_width:"240px",canvas_height:"100px",canvas_style:"src-editor-components-tool_bar-controls--histogram-module-canvas_style-T6fRK"},t.a=s},l75k:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n("MOMi"),s=n("xM47");const a={angleDegrees:0,shape:i.l.circle,spacing:s.c};function r(e,t,n){return Object.assign(Object.assign({},a),{hardness:t,strength:n,size:e})}function o(e,t,n,i){const s=Math.sqrt(e[0]*e[1])*t;return Object.assign(Object.assign({},a),{hardness:n,strength:i,size:s})}},"v/vF":function(e){e.exports=JSON.parse('[{"id":222182,"name":"square","width":1,"height":1,"scaleDocument":false},{"id":222157,"name":{"width":3.5,"height":2,"unit":"in"},"width":600,"height":1050,"scaleDocument":false},{"id":222015,"name":{"width":4,"height":2,"unit":"in"},"width":600,"height":1200,"scaleDocument":false},{"id":222016,"name":{"width":3.5,"height":2.5,"unit":"in"},"width":750,"height":1050,"scaleDocument":false},{"id":222017,"name":{"width":2.5,"height":3,"unit":"in"},"width":900,"height":750,"scaleDocument":false},{"id":222203,"name":{"width":3,"height":3,"unit":"in"},"width":900,"height":900,"scaleDocument":false},{"id":222205,"name":{"width":5,"height":3,"unit":"in"},"width":900,"height":1500,"scaleDocument":false},{"id":222018,"name":{"width":2,"height":3.5,"unit":"in"},"width":1050,"height":600,"scaleDocument":false},{"id":222019,"name":{"width":5,"height":3.5,"unit":"in"},"width":1050,"height":1500,"scaleDocument":false},{"id":222158,"name":{"width":2,"height":4,"unit":"in"},"width":1200,"height":600,"scaleDocument":false},{"id":222020,"name":{"width":6,"height":4,"unit":"in"},"width":1200,"height":1800,"scaleDocument":false},{"id":222021,"name":{"width":8,"height":4,"unit":"in"},"width":1200,"height":2400,"scaleDocument":false},{"id":222198,"name":{"width":6,"height":4.25,"unit":"in"},"width":1275,"height":1800,"scaleDocument":false},{"id":222022,"name":{"width":7,"height":5,"unit":"in"},"width":1500,"height":2100,"scaleDocument":false},{"id":222024,"name":{"width":8.5,"height":5.5,"unit":"in"},"width":1650,"height":2550,"scaleDocument":false},{"id":222023,"name":{"width":5.25,"height":5.25,"unit":"in"},"width":1575,"height":1575,"scaleDocument":false},{"id":222159,"name":{"width":4,"height":6,"unit":"in"},"width":1800,"height":1200,"scaleDocument":false},{"id":222025,"name":{"width":9,"height":6,"unit":"in"},"width":1800,"height":2700,"scaleDocument":false},{"id":222207,"name":{"width":11,"height":6,"unit":"in"},"width":1800,"height":3300,"scaleDocument":false},{"id":222160,"name":{"width":5,"height":7,"unit":"in"},"width":2100,"height":1500,"scaleDocument":false},{"id":222161,"name":{"width":4,"height":8,"unit":"in"},"width":2400,"height":1200,"scaleDocument":false},{"id":222026,"name":{"width":10,"height":8,"unit":"in"},"width":2400,"height":3000,"scaleDocument":false},{"id":222199,"name":{"width":11,"height":8,"unit":"in"},"width":2400,"height":3300,"scaleDocument":false},{"id":222027,"name":{"width":11,"height":8.5,"unit":"in"},"width":2550,"height":3300,"scaleDocument":false},{"id":222162,"name":{"width":6,"height":9,"unit":"in"},"width":2700,"height":1800,"scaleDocument":false},{"id":222155,"name":{"width":8,"height":10,"unit":"in"},"width":3000,"height":2400,"scaleDocument":false},{"id":222156,"name":{"width":8.5,"height":11,"unit":"in"},"width":3300,"height":2550,"scaleDocument":false},{"id":222187,"name":{"width":14,"height":11,"unit":"in"},"width":3300,"height":4200,"scaleDocument":false},{"id":222188,"name":{"width":9,"height":16,"unit":"in"},"width":4800,"height":2700,"scaleDocument":false},{"id":222194,"name":"a3","width":3508,"height":4961,"scaleDocument":false},{"id":222197,"name":"a4","width":2480,"height":3508,"scaleDocument":false},{"id":222206,"name":"a5","width":1748,"height":2480,"scaleDocument":false},{"id":222202,"name":"a6","width":1240,"height":1748,"scaleDocument":false},{"id":222201,"name":"a7","width":874,"height":1240,"scaleDocument":false},{"id":222030,"name":"etsy_item_listing_photo","width":2000,"height":2000,"scaleDocument":true},{"id":222031,"name":"etsy_order_receipt_banner","width":760,"height":100,"scaleDocument":true},{"id":222032,"name":"etsy_shop_big_banner","width":3360,"height":840,"scaleDocument":true},{"id":222033,"name":"etsy_shop_icon","width":500,"height":500,"scaleDocument":true},{"id":222034,"name":"etsy_shop_mini_banner","width":1200,"height":160,"scaleDocument":true},{"id":222035,"name":"etsy_shop_owner_photo","width":400,"height":400,"scaleDocument":true},{"id":222037,"name":"facebook_ad","width":1200,"height":628,"scaleDocument":true},{"id":222038,"name":"facebook_carousel_ad","width":1080,"height":1080,"scaleDocument":true},{"id":222039,"name":"facebook_event_cover","width":1200,"height":628,"scaleDocument":true},{"id":222040,"name":"facebook_group_cover","width":1640,"height":856,"scaleDocument":true},{"id":222041,"name":"facebook_page_cover","width":1640,"height":924,"scaleDocument":true},{"id":222042,"name":"facebook_personal_cover","width":1702,"height":630,"scaleDocument":true},{"id":222043,"name":"facebook_post","width":1200,"height":1200,"scaleDocument":true},{"id":222044,"name":"facebook_profile_image","width":360,"height":360,"scaleDocument":true},{"id":222045,"name":"facebook_story","width":1080,"height":1920,"scaleDocument":true},{"id":222047,"name":"igtv_cover_photo","width":420,"height":654,"scaleDocument":true},{"id":222154,"name":"instagram_carousel_ad","width":1080,"height":1080,"scaleDocument":true},{"id":222048,"name":"instagram_landscape","width":1080,"height":566,"scaleDocument":true},{"id":222049,"name":"instagram_portrait","width":1080,"height":1350,"scaleDocument":true},{"id":222050,"name":"instagram_post","width":1080,"height":1080,"scaleDocument":true},{"id":222051,"name":"instagram_profile","width":360,"height":360,"scaleDocument":true},{"id":222052,"name":"instagram_story","width":1080,"height":1920,"scaleDocument":true},{"id":222053,"name":"instagram_story_highlight_cover","width":1080,"height":1920,"scaleDocument":true},{"id":222055,"name":"linkedin_company_cover","width":1128,"height":191,"scaleDocument":true},{"id":222056,"name":"linkedin_cover_photo","width":1584,"height":396,"scaleDocument":true},{"id":222057,"name":"linkedin_post","width":1400,"height":800,"scaleDocument":true},{"id":222058,"name":"linkedin_profile","width":400,"height":400,"scaleDocument":true},{"id":222059,"name":"linkedin_sponsored_ad","width":1200,"height":627,"scaleDocument":true},{"id":222061,"name":"medium_background_image","width":1500,"height":750,"scaleDocument":true},{"id":222063,"name":"pinterest_pin","width":1000,"height":1500,"scaleDocument":true},{"id":222064,"name":"pinterest_ad_pin","width":1000,"height":1500,"scaleDocument":true},{"id":222065,"name":"pinterest_square_pin","width":1000,"height":1000,"scaleDocument":true},{"id":222067,"name":"snapchat_ad","width":1080,"height":1920,"scaleDocument":true},{"id":222068,"name":"snapchat_geofilter","width":1080,"height":2340,"scaleDocument":true},{"id":222069,"name":"snapchat_story_ad","width":360,"height":600,"scaleDocument":true},{"id":222071,"name":"tumblr_post","width":500,"height":750,"scaleDocument":true},{"id":222072,"name":"tumblr_profile","width":360,"height":360,"scaleDocument":true},{"id":222074,"name":"twitch_highlight","width":1920,"height":1080,"scaleDocument":true},{"id":222076,"name":"twitter_header","width":1500,"height":500,"scaleDocument":true},{"id":222077,"name":"twitter_lead_generation_card","width":800,"height":320,"scaleDocument":true},{"id":222078,"name":"twitter_post","width":1024,"height":512,"scaleDocument":true},{"id":222079,"name":"twitter_profile","width":400,"height":400,"scaleDocument":true},{"id":222082,"name":"youtube_channel_art","width":2560,"height":1440,"scaleDocument":true},{"id":222081,"name":"youtube_channel_icon","width":800,"height":800,"scaleDocument":true},{"id":222083,"name":"youtube_display_ad","width":300,"height":250,"scaleDocument":true},{"id":222084,"name":"youtube_display_ad_long","width":300,"height":60,"scaleDocument":true},{"id":222085,"name":"youtube_overlay_ad","width":480,"height":70,"scaleDocument":true},{"id":222086,"name":"youtube_thumbnail","width":1280,"height":720,"scaleDocument":true},{"id":222005,"name":"billboard_ad","width":970,"height":250,"scaleDocument":true},{"id":222006,"name":"half_page_ad","width":300,"height":600,"scaleDocument":true},{"id":222008,"name":"large_leaderboard_ad_mobile","width":320,"height":100,"scaleDocument":false},{"id":222010,"name":"large_rectangle_ad","width":336,"height":280,"scaleDocument":false},{"id":222007,"name":"leaderboard_ad","width":728,"height":90,"scaleDocument":true},{"id":222011,"name":"medium_rectangle_ad","width":300,"height":250,"scaleDocument":false},{"id":222012,"name":"skyscraper_ad","width":120,"height":600,"scaleDocument":true},{"id":222009,"name":"small_leaderboard_ad_mobile","width":320,"height":50,"scaleDocument":false},{"id":222013,"name":"wide_skyscraper_ad","width":160,"height":600,"scaleDocument":false},{"id":222003,"name":"kindle_book_cover","width":1600,"height":2560,"scaleDocument":true},{"id":222002,"name":"ibook_cover","width":1600,"height":2560,"scaleDocument":true},{"id":222004,"name":"wattpad_book_cover","width":768,"height":1200,"scaleDocument":true},{"id":222193,"name":{"width":200,"height":200,"unit":"px"},"width":200,"height":200,"scaleDocument":true},{"id":222204,"name":{"width":250,"height":250,"unit":"px"},"width":250,"height":250,"scaleDocument":true},{"id":222195,"name":{"width":60,"height":468,"unit":"px"},"width":468,"height":60,"scaleDocument":true},{"id":222208,"name":{"width":90,"height":970,"unit":"px"},"width":970,"height":90,"scaleDocument":true},{"id":222179,"name":{"width":768,"height":1024,"unit":"px"},"width":1024,"height":768,"scaleDocument":true},{"id":222183,"name":{"width":800,"height":1280,"unit":"px"},"width":1280,"height":800,"scaleDocument":true},{"id":222181,"name":{"width":1024,"height":1280,"unit":"px"},"width":1280,"height":1024,"scaleDocument":true},{"id":222185,"name":{"width":1080,"height":1920,"unit":"px"},"width":1920,"height":1080,"scaleDocument":true},{"id":222186,"name":{"width":1600,"height":2560,"unit":"px"},"width":2560,"height":1600,"scaleDocument":true},{"id":222189,"name":"2k_qhd","width":2560,"height":1440,"scaleDocument":true},{"id":222102,"name":"4k_uhdtv","width":3840,"height":2160,"scaleDocument":true},{"id":222190,"name":"360p_ld_video","width":640,"height":360,"scaleDocument":true},{"id":222101,"name":"480p_sd_video","width":854,"height":480,"scaleDocument":true},{"id":222103,"name":"720p_hd_video","width":1280,"height":720,"scaleDocument":true},{"id":222100,"name":"1080p_hd_video","width":1920,"height":1080,"scaleDocument":true},{"id":222191,"name":"vertical_full_hd","width":1080,"height":1920,"scaleDocument":true},{"id":222192,"name":"vertical_hd_ready","width":720,"height":1280,"scaleDocument":true},{"id":222165,"name":"business_card","width":1050,"height":600,"scaleDocument":true},{"id":222166,"name":"calendar","width":1920,"height":1080,"scaleDocument":true},{"id":222167,"name":"card","width":1500,"height":2100,"scaleDocument":true},{"id":222168,"name":"cover_letter","width":2550,"height":3300,"scaleDocument":true},{"id":222028,"name":"email_header","width":600,"height":200,"scaleDocument":true},{"id":222169,"name":"flyer","width":2550,"height":3300,"scaleDocument":true},{"id":222170,"name":"invoice","width":2550,"height":3300,"scaleDocument":true},{"id":222171,"name":"postcard","width":1200,"height":1800,"scaleDocument":true},{"id":222172,"name":"poster","width":2550,"height":3300,"scaleDocument":false},{"id":222173,"name":"presentation","width":1920,"height":1080,"scaleDocument":true},{"id":222174,"name":"resume","width":2550,"height":3300,"scaleDocument":true},{"id":222244,"name":"coloring_sheet","width":2550,"height":3300,"scaleDocument":false},{"id":222214,"name":"planner","width":2550,"height":3300,"scaleDocument":false},{"id":222250,"name":"pinterest_shopping_ad_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222228,"name":"instagram_layout","width":3240,"height":3240,"scaleDocument":false},{"id":222236,"name":"short_email","width":1200,"height":1800,"scaleDocument":false},{"id":222240,"name":"worksheet","width":2550,"height":3300,"scaleDocument":false},{"id":222216,"name":"weekly_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222211,"name":"daily_calendar","width":2550,"height":3300,"scaleDocument":false},{"id":222230,"name":"food_menu","width":2550,"height":3300,"scaleDocument":false},{"id":222219,"name":"daily_schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222238,"name":"long_email","width":1200,"height":3000,"scaleDocument":false},{"id":222215,"name":"daily_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222229,"name":"menu","width":2550,"height":3300,"scaleDocument":false},{"id":222239,"name":"tumblr_banner","width":3000,"height":1055,"scaleDocument":false},{"id":222248,"name":"pinterest_carousel_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222217,"name":"monthly_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222246,"name":"budget_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222231,"name":"drink_menu","width":2550,"height":3300,"scaleDocument":false},{"id":222249,"name":"pinterest_carousel_ad_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222212,"name":"weekly_calendar","width":2550,"height":3300,"scaleDocument":false},{"id":222245,"name":"email_signature","width":600,"height":200,"scaleDocument":false},{"id":222237,"name":"medium_email","width":1200,"height":2400,"scaleDocument":false},{"id":222242,"name":"soundcloud_banner","width":2480,"height":520,"scaleDocument":false},{"id":222221,"name":"monthly_schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222251,"name":"pinterest_collection_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222227,"name":"business_plan","width":2550,"height":3300,"scaleDocument":false},{"id":222243,"name":"pinterest_idea_pin","width":1080,"height":1920,"scaleDocument":false},{"id":222213,"name":"monthly_calendar","width":2550,"height":3300,"scaleDocument":false},{"id":222226,"name":"gift_certificate","width":1800,"height":1200,"scaleDocument":false},{"id":222225,"name":"certificate","width":1800,"height":1200,"scaleDocument":false},{"id":222234,"name":"zoom_background","width":1920,"height":1080,"scaleDocument":false},{"id":222222,"name":"instagram_ad","width":1080,"height":1080,"scaleDocument":true},{"id":222223,"name":"instagram_bingo","width":1080,"height":1920,"scaleDocument":false},{"id":222210,"name":"facebook_shop","width":1600,"height":1200,"scaleDocument":false},{"id":222232,"name":"recipe_card","width":1800,"height":1200,"scaleDocument":false},{"id":222220,"name":"weekly_schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222218,"name":"schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222224,"name":"instagram_question","width":1080,"height":1920,"scaleDocument":false},{"id":222247,"name":"pinterest_video_pin","width":1000,"height":1500,"scaleDocument":false}]')},wynV:function(e,t,n){"use strict";n.r(t),n.d(t,"CurvesFxPanelUnconnected",(function(){return H})),n.d(t,"CurvesFxDevPanel",(function(){return T}));var i=n("Gkqz"),s=n("q1tI"),a=n("LvDl"),r=n("bBtN"),o=n("hrAu"),h=n("b340"),l=n("ZIGy"),c=n("8KIJ"),d=n("MP9G"),u=n("H2Kc"),p=n("RleE"),m=n("/MKj"),g=n("wHal"),b=n("luWw"),f=n("8pJm"),w=n("KwuG"),v=n("A7LA"),x=n("m3rI");const O=["rgba(0,0,0,0.4)","rgba(255,0,0,0.4)","rgba(0,255,0,0.4)","rgba(0,0,255,0.4)"],C=["rgba(0,0,0,1)","rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)"],_={points:[]};class j extends s.PureComponent{constructor(e){super(e),this.couldRemoveSelectedPoint=!1,this.getDocument=()=>this.document,this.getCanvasCoord=e=>{const t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},this.offCanvas=e=>{const t=this.canvas.getBoundingClientRect();if(0===t.width&&0===t.height){if(e.clientX>this.canvas.width||e.clientX<0)return!0;if(e.clientY>this.canvas.height||e.clientY<0)return!0}else{if(e.clientX>t.right||e.clientX<t.left)return!0;if(e.clientY>t.bottom||e.clientY<t.top)return!0}return!1},this.canvasPointToGraphPoint=e=>function(e,t){const n=e;let i=t.x/e,s=(n-t.y)/n;return i*=255,s*=255,i=Object(g.a)(i,0,255),s=Object(g.a)(s,0,255),{x:i,y:s}}(this.props.canvasSize,e),this.handleMouseUp=e=>{this.shouldRemovePoint(e)&&this.removePoint(this.props.curveIndex,this.state.selectedPoint),this.props.onFinishedDraggging&&this.props.onFinishedDraggging(),this.setState({selectedPoint:-1,mouseDown:!1,minX:null,maxX:null},this.updateGraph)},this.handleMouseDown=e=>{this.offCanvas(e)||(this.couldRemoveSelectedPoint=!1,this.setState({mouseDown:!0},()=>{const t=this.canvasPointToGraphPoint(this.getCanvasCoord(e));this.handlePointClicked(t)||this.handleLineClicked(t)}))},this.handleMouseMove=e=>{const t=this.canvasPointToGraphPoint(this.getCanvasCoord(e));this.state.selectedPoint>=0?this.moveSelectedPoint(t):this.state.mouseDown?t.x<this.state.maxX&&t.x>this.state.minX&&this.handleLineClicked(t,!0):this.setPointCursor(t)||this.setLineCursor(t)||this.resetCursor()},this.setCanvas=e=>{e&&(this.canvas=e,x.j||(this.ctx=e.getContext("2d")))},this.state={cursor:"default",selectedPoint:-1,mouseDown:!1,maxX:null,minX:null}}componentDidMount(){this.document=document,this.document.addEventListener("mousedown",this.handleMouseDown),this.document.addEventListener("mouseup",this.handleMouseUp),this.document.addEventListener("mousemove",this.handleMouseMove),this.props.curves&&(this.setCanvasScale(),this.updateGraph())}componentWillUnmount(){this.document.removeEventListener("mousedown",this.handleMouseDown),this.document.removeEventListener("mouseup",this.handleMouseUp),this.document.removeEventListener("mousemove",this.handleMouseMove)}componentDidUpdate(e,t){Object(a.isEqual)(e,this.props)||this.props.curves&&this.updateGraph()}graphPointToCanvasPoint(e){return S(this.props.canvasSize,e)}interpolators(){const{curves:e=[]}=this.props;return e.map(e=>Object(b.e)("spline",Object(b.f)(e)))}currentInterpolator(){return this.interpolators()[this.props.curveIndex]}findPointClicked(e){const{curves:t=[],curveIndex:n}=this.props;return(t[n]||_).points.findIndex(Object(a.partial)(D,e))}isPointOnCurve(e){const t=e.x,{curves:n=[],curveIndex:i}=this.props,s=Object(b.e)("spline",Object(b.f)(n[i]||_));return D(e,{x:t,y:Object(g.a)(s.interpolate(t),0,255)})}shouldRemovePoint(e){if(!this.couldRemoveSelectedPoint)return!1;const t=this.props.curves[this.props.curveIndex];return!(this.state.selectedPoint<1||this.state.selectedPoint===t.points.length-1)&&(this.props.osFamily===v.b.mac&&e.metaKey||this.props.osFamily===v.b.windows&&e.ctrlKey)}handleLineClicked(e,t=!1){if(!this.isPointOnCurve(e)&&!t)return!1;const{curveIndex:n}=this.props,i=this.props.curves[n],{x:s,y:a}=e;let r=i.points.findIndex(e=>e.x>s);r<0&&(r=i.points.length);const o=r>0?i.points[r-1].x:0,h=r<i.points.length?i.points[r].x:255;return this.setState({selectedPoint:r,minX:o,maxX:h}),this.insertPoint(n,r,s,a),!0}handlePointClicked(e){const t=this.findPointClicked(e),{curveIndex:n}=this.props,i=this.props.curves[n],s=t>0?i.points[t-1].x:0,a=t+1<i.points.length?i.points[t+1].x:255;return this.setState({selectedPoint:t,maxX:a,minX:s}),this.couldRemoveSelectedPoint=t>-1,this.couldRemoveSelectedPoint}moveSelectedPoint(e){const{selectedPoint:t,minX:n,maxX:i}=this.state;if(t<0)return;let{x:s}=e;this.couldRemoveSelectedPoint=!1;const{curveIndex:a}=this.props,r=this.props.curves[a];!(t===r.points.length-1||0===t)&&(s>=i||s<=n)?(this.removePoint(this.props.curveIndex,this.state.selectedPoint),this.setState({selectedPoint:-1},this.updateGraph)):(0===t&&(s=Object(g.a)(s,n,i-1)),t===r.points.length-1&&(s=Object(g.a)(s,n+1,i)),this.setPoint(this.props.curveIndex,this.state.selectedPoint,s,e.y))}selectedPointCoords(){if(this.state.selectedPoint<0||!this.props.curves)return null;const{curves:e,curveIndex:t}=this.props;return e[t].points[this.state.selectedPoint]}setPointCursor(e){return!(this.findPointClicked(e)<0)&&(this.setState({cursor:"move"}),!0)}setLineCursor(e){return!!this.isPointOnCurve(e)&&(this.setState({cursor:"crosshair"}),!0)}resetCursor(){return this.setState({cursor:"default"}),!0}insertPoint(e,t,n,i){this.updatePoints(e,n,i,(e,n)=>[...e.slice(0,t),n,...e.slice(t)])}removePoint(e,t){this.updatePoints(e,0,0,(e,n)=>[...e.slice(0,t),...e.slice(t+1)])}setPoint(e,t,n,i){this.updatePoints(e,n,i,(e,n)=>[...e.slice(0,t),n,...e.slice(t+1)])}updatePoints(e,t,n,i){let s=this.props.curves,a=s[e],{points:r}=a;r=i(r,{x:Math.round(t),y:Math.round(n)}),a={points:r},s=[...s.slice(0,e),a,...s.slice(e+1)],this.props.setCurves(s)}setCanvasScale(){const e=Object(f.a)();this.ctx&&this.ctx.scale(e,e)}updateGraph(){if(this.ctx){const{canvasSize:e,curves:t,curveIndex:n}=this.props,i=this.selectedPointCoords();!function(e,t){e.clearRect(0,0,t,t)}(this.ctx,e),function(e,t){e.beginPath(),e.strokeStyle="rgba(200, 200, 200, 1)",e.lineWidth=1,e.moveTo(.5,t),e.lineTo(t+.5,0),e.stroke()}(this.ctx,e),function(e,t){const n=t/4;e.beginPath(),e.strokeStyle="rgba(200, 200, 200, 1)",e.lineWidth=.5;for(let i=1;i<=3;i++)e.moveTo(n*i,0),e.lineTo(n*i,t),e.moveTo(0,n*i+0),e.lineTo(t,n*i);e.stroke()}(this.ctx,e),function(e,t,n,i){const s=n,a=s-1;t.forEach((t,r)=>{e.beginPath(),e.strokeStyle=r===i?C[r]:O[r],e.lineWidth=1;for(let i=0;i<=s;i+=1){const s=i/a*255,r=t.interpolate(s),{x:o,y:h}=S(n,{x:s,y:r});0===i?e.moveTo(o,h):e.lineTo(o,h)}e.stroke()})}(this.ctx,this.interpolators(),e,n),function(e,t,n,i){n.points.forEach(n=>{const{x:s,y:a}=S(t,n);e.beginPath(),e.strokeStyle=C[i],e.lineWidth=1,e.arc(s,a,3,0,2*Math.PI),e.stroke()})}(this.ctx,e,t[n],n),i&&function(e,t,n){const{x:i,y:s}=n;e.beginPath(),e.strokeStyle="rgba(190, 190, 190, 1)",e.lineWidth=1,e.moveTo(0,s),e.lineTo(t,s),e.moveTo(i,0),e.lineTo(i,t),e.stroke()}(this.ctx,e,this.graphPointToCanvasPoint(i))}}render(){const{canvasSize:e}=this.props,{cursor:t}=this.state;return s.createElement("canvas",{ref:this.setCanvas,width:Object(f.a)()*e,height:Object(f.a)()*e,style:{width:e,height:e,cursor:t}})}}function S(e,t){const n=e;let i=t.x/255*n,s=e-t.y/255*n;return i=Object(g.a)(i,0,e),s=Object(g.a)(s,0,e),{x:i,y:s}}function D(e,t){const{x:n,y:i}=t,{x:s,y:a}=e;return Math.abs(s-n)<=10&&Math.abs(a-i)<=10}var y=Object(m.b)((function(e){return{osFamily:w.n(e)}}))(j),E=n("MOMi"),P=n("GZZW"),k=n("LboF"),M=n.n(k),A=n("cFMp"),I={insert:"head",singleton:!1},F=(M()(A.a,I),A.a.locals||{});const B=n("Hg4B").c.curves,z=Object.assign(Object.assign({},u.b),{curves:Object(b.b)(p.d.default),preset:"default",channel:"rgb"}),L=["rgb","red","green","blue"],V=Object(b.a)([[0,0],[255,255]]),R={points:[]};class H extends s.PureComponent{constructor(e){super(e),this.handlePresetChange=e=>{const t=Object(b.b)(p.d[e]||p.d.default);this.props.updateFxAttr("channel","rgb",!1),this.props.updateFxAttr("curves",t,!1);const n=p.b[e]||0;this.props.updateFxAttr("colorOverride",n,!1),this.props.updateFxAttr("preset",e,!1),this.props.commit()},this.handleChannelChange=e=>{const{curves:t}=this.props.uiFxAttrs,n=L.indexOf(e);if(n<0)return;this.props.updateFxAttr("channel",e,!1);const i=new Array(L.length);for(let s=0;s<L.length;s++)i[s]=t[s]||R,s===n&&0===i[s].points.length?i[s]=V:s!==n&&Object(a.isEqual)(i[s],V)&&(i[s]=R);Object(a.isEqual)(t,i)||this.props.updateFxAttr("curves",i,!1),this.props.commit()},this.setCurves=e=>{this.props.updateFxAttr("preset","custom",!1),this.props.updateFxAttr("curves",e,!1)},this.handleRawPointInputChanged=e=>{const t=this.parseRawPointInput(e.target.value);t?(this.setCurves(t),this.props.commit()):this.handlePresetChange("default")},this.onFinishedDraggging=()=>this.props.commit()}parseRawPointInput(e){const t=(e=e.replace(/\n/g,"")).match(/(\{.*?\})+/g);if(t&&4===t.filter(e=>!!e).length){const e=t.map(e=>{let t=(e=e.slice(1,-1)).split(/[\,\s]+/);t=t.filter(e=>""!==e);const n=t.map(Number);return Object(b.d)(n)}),[n,i,s,a]=e;return[n,a,s,i]}return null}renderRawPontInput(){return s.createElement("div",null,s.createElement("label",null,"Raw curve input"),s.createElement("textarea",{style:{width:"100%",height:100,overflow:"auto",fontFamily:"courier"},onChange:this.handleRawPointInputChanged}),s.createElement("pre",{style:{fontFamily:"courier",fontSize:8}},"Example (rgb, blue, green, red):",s.createElement("br",null),"{0,0,255,255}",s.createElement("br",null),"{0,0,120,128,255,240}",s.createElement("br",null),"{0,0,100,98,240,255}",s.createElement("br",null),"{0,0,64,90,96,100,128,170,255,255}"))}render(){const{channel:e,curves:t,preset:n}=this.props.uiFxAttrs,r=(()=>({rgb:Object(i.b)("effect","rgb"),red:Object(i.b)("effect","red"),green:Object(i.b)("effect","green"),blue:Object(i.b)("effect","blue")}))(),u=Object(p.a)();return s.createElement(o.a,Object.assign({},this.props,{title:Object(i.b)("effect","curves"),panelId:this.props.panelId||B,showMaskButton:!0}),s.createElement(c.b,{label:Object(i.b)("effect","presets"),onChange:this.handlePresetChange},Object(a.keys)(u).map((e,t)=>s.createElement(d.b,{key:t,selected:e===n,value:e,label:u[e]}))),s.createElement(c.b,{label:Object(i.b)("effect","channel"),isRow:!0,onChange:this.handleChannelChange,defaultValue:e},Object(a.keys)(r).map((t,n)=>s.createElement(d.b,{key:t,selected:t===e,value:t,label:r[t]}))),s.createElement("div",{className:F.curve_control_container},s.createElement(y,{curves:t,canvasSize:parseInt(F.curve_control_width,10),curveIndex:L.indexOf(e),setCurves:this.setCurves,onFinishedDraggging:this.onFinishedDraggging})),s.createElement(h.a,{key:"colorOverride",name:"colorOverride",label:Object(i.b)("effect","color_override"),min:0,max:100,formatter:l.a.roundedPercent,onChange:this.props.updateFxAttr}),s.createElement(h.a,{key:"fade",name:"fade",label:Object(i.b)("effect","fade"),min:P.m,max:P.d,formatter:l.a.roundedPercent,onChange:this.props.updateFxAttr}),this.props.enableRawPointInput?this.renderRawPontInput():null)}}t.default=Object(r.a)(H,{effectType:E.r.Curves,panelId:B,fxAttrDefaults:z,getUiFxAttrs:function({curves:e,preset:t,channel:n}){return{curves:e,preset:t,channel:n}}});const T=Object(r.a)((function(e){return s.createElement(H,Object.assign({},e,{enableRawPointInput:!0,panelId:"curves_dev"}))}),{effectType:E.r.Curves,panelId:"curves_dev",fxAttrDefaults:z})}}]);
//# sourceMappingURL=editor-panel-edits.2158f3471a09d1c8b227.bundle.js.map