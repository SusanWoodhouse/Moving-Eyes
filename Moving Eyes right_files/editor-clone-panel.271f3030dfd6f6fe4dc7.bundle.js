(this.webpackJsonp=this.webpackJsonp||[]).push([[54],{"/BrD":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return K})),n.d(t,"a",(function(){return J}));var r,s=n("Gkqz"),a=n("QKml"),o=n("ZIGy"),i=n("q1tI"),l=n("/MKj"),c=n("TSYQ"),h=n.n(c),u=n("LvDl"),d=n("x+OS"),p=n("lAjK"),b=n("Yh64"),g=n("xlbG"),m=n("VPDm"),f=n("jpIK"),S=n("FL8F"),C=n("g0vd"),x=n("MOMi"),k=n("9L+2"),v=n("VM6C"),E=n("ftKm"),M=n("iZmR"),B=n("v1iL"),O=n("pyUj"),y=n("PxYM"),_=n("ha7/"),j=n("JRaF"),A=n("W6xo"),D=n("p2Ep"),w=n("nFsU"),F=n("4N86"),P=n("QcG9"),I=n("VGFk"),T=n("kUL8"),z=n("NZ9u"),V=n("IS7I");function G({checked:e,icon:t}){const n=h()(C.a.brush_shape_option,{[C.a.checked]:e});return i.createElement("div",{className:n},t)}!function(e){e.erase="erase",e.paint="paint"}(r||(r={}));const H=[{id:x.l.circle,icon:i.createElement(O.default,null)},{id:x.l.square,icon:i.createElement(w.default,null)},{id:x.l.triangle,icon:i.createElement(P.default,null)},{id:x.l.hexagon,icon:i.createElement(A.default,null)},{id:x.l.star,icon:i.createElement(F.default,null)},{id:x.l.heart,icon:i.createElement(j.default,null)},{id:x.l.wetbrush,icon:i.createElement(I.default,null)},{id:x.l.drybrush,icon:i.createElement(y.default,null)},{id:x.l.marker,icon:i.createElement(D.default,null)},{id:x.l.pencil,icon:i.createElement(_.default,null)}];const R=e=>2*e,K=e=>.5*e;class L extends i.PureComponent{constructor(){super(...arguments),this.handleChangeStrength=(e,t,n)=>{const r=Math.sign(this.props.brushAlpha);this.props.onChangeStrength(r,t)},this.onSliderDragStart=e=>{this.props.startMaskPreview(e.clientX,e.clientY)},this.endMaskPreview=()=>{this.props.endMaskPreview()},this.handleAnalyticsForDetailChange=(e,t)=>{const{brushShape:n,eraseChecked:s,commonEventData:o}=this.props;z.a.trackChange(this.props.pageSection,e,Object.assign({value:t,brush_shape:n,brush_type:this.props.activeBrush===a.a.default?s?r.erase:r.paint:s?r.paint:r.erase},o))},this.handleChangeBrush=()=>{const{onChangeBrush:e,noStrokes:t,doesBrushTargetEffectMask:n,effectId:r}=this.props;e(t,n,r)},this.renderBrushModeControls=()=>{const{eraseChecked:e,showBrushMode:t}=this.props;return t?i.createElement(g.a,{variant:m.c.underliner,label:e?Object(s.b)("editor","erase"):Object(s.b)("editor","brush"),name:"brush-mode",defaultTab:e?r.erase:r.paint,onChange:this.handleChangeBrush,tabs:[{label:i.createElement(d.default,null),key:r.erase},{label:i.createElement(p.default,null),key:r.paint}]}):null},this.handleChangeShape=e=>{this.props.onChangeShape(e)},this.renderShapeIconTrigger=(e,t,n)=>{const{brushShape:r}=this.props;let s=!t,a=n?(t,r)=>n(r,()=>this.handleChangeShape(e.id)):void 0;return e.id===x.l.circle&&(t=null,s=!1,a=()=>this.handleChangeShape(e.id)),i.createElement(k.a,{name:"shape",imageKey:e.id,value:r,isNew:s,badge:t,onClick:a},i.createElement(G,{icon:e.icon}))},this.renderShapeIcon=e=>{const t=Object(E.b)(E.a.proSubscriber,S.b.meta.noop(),B.b.brushShapesPaywall);return i.createElement(M.a,{key:e.id,paywall:t,trigger:Object(u.partial)(this.renderShapeIconTrigger,e),badgeClassName:C.a.pro_badge})},this.renderShapeGroup=()=>{const{isSdkProviderActive:e}=this.props,t=e?H.filter(e=>e.id===x.l.circle):H;return i.createElement(v.b,null,t.map(this.renderShapeIcon))},this.renderSpacingSlider=()=>{const{brushSpacing:e,onChangeSpacing:t,initialBrushValues:n,brushControlsContext:r}=this.props;return i.createElement(b.a,{name:"spacing",value:e,label:Object(s.b)("editorControls","brush_spacing"),featureSliderContext:r,min:0,max:200,step:1,formatter:o.a.roundedPercent,onChange:t,resetToValue:null==n?void 0:n.spacing,onSliderDragEnd:()=>this.handleAnalyticsForDetailChange("spacing_changed",e),onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("spacing_changed",e)})},this.renderRotationSlider=()=>{const{brushAngleDegrees:e,onChangeRotation:t,initialBrushValues:n,brushControlsContext:r}=this.props;return i.createElement(b.a,{name:"angleDegrees",value:e,label:Object(s.b)("editorControls","brush_rotation"),featureSliderContext:r,min:0,max:360,step:1,formatter:o.a.degrees,onChange:t,resetToValue:null==n?void 0:n.angleDegrees,onSliderDragEnd:()=>this.handleAnalyticsForDetailChange("rotation_changed",e),onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("rotation_changed",e)})},this.renderHardnessSlider=()=>{const{brushHardness:e,onChangeHardness:t,initialBrushValues:n,brushControlsContext:r}=this.props;return i.createElement(b.a,{name:"hardness",value:e,label:Object(s.b)("editorControls","brush_hardness"),featureSliderContext:r,min:1,max:100,step:1,formatter:o.a.roundedPercent,onChange:t,onSliderDragStart:this.onSliderDragStart,onSliderDragEnd:()=>{this.endMaskPreview(),this.handleAnalyticsForDetailChange("hardness_changed",e)},resetToValue:null==n?void 0:n.hardness,onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("hardness_changed",e)})},this.renderStrengthSlider=()=>{const{brushStrength:e,initialBrushValues:t,brushControlsContext:n}=this.props;return i.createElement(b.a,{name:"strength",value:e,label:Object(s.b)("editorControls","brush_strength"),featureSliderContext:n,min:1,max:100,step:1,formatter:o.a.roundedPercent,onChange:this.handleChangeStrength,onSliderDragStart:this.onSliderDragStart,onSliderDragEnd:()=>{this.endMaskPreview(),this.handleAnalyticsForDetailChange("strength_changed",e)},resetToValue:null==t?void 0:t.strength,onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("strength_changed",e)})},this.renderSizeSlider=()=>{const{brushSize:e,onChangeSize:t,maxBrushSize:n,initialBrushValues:r,brushControlsContext:a}=this.props;return i.createElement(b.a,{name:"diameter",value:e,label:Object(s.b)("core","size"),featureSliderContext:a,min:1,max:n||500,step:1,onChange:t,onSliderDragStart:this.onSliderDragStart,onSliderDragEnd:()=>{this.endMaskPreview(),this.handleAnalyticsForDetailChange("size_changed",e)},resetToValue:null==r?void 0:r.size,onPlusMinusButtonClick:()=>this.handleAnalyticsForDetailChange("size_changed",e)})},this.renderSliders=()=>{const{showStrengthSlider:e,showShapes:t,showHardnessSlider:n}=this.props;return i.createElement(i.Fragment,null,t&&this.renderShapeGroup(),this.renderSizeSlider(),n&&this.renderHardnessSlider(),e&&this.renderStrengthSlider(),t&&this.renderRotationSlider(),t&&this.renderSpacingSlider())}}componentDidMount(){const{activeBrush:e,initialBrushValues:t}=this.props;this.props.setActiveBrush(e),t&&this.updateBrushValues(t)}updateBrushValues(e){const{size:t,hardness:n,strength:r,shape:s,angleDegrees:a,spacing:o}=e;this.props.onChangeSize("size",t,!1),this.props.onChangeHardness("hardness",n,!1),this.props.onChangeStrength(Math.sign(r),r),this.props.showShapes&&this.props.onChangeShape(s),this.props.onChangeRotation("angleDegrees",a),this.props.onChangeSpacing("spacing",o)}render(){return i.createElement(i.Fragment,null,this.renderBrushModeControls(),this.renderSliders())}}function N(e,t,n){e(S.b.ux.setBrushDiameter(R(n)))}function Z(e,t,n){e(S.b.ux.setBrushHardness(n/100))}L.defaultProps={activeBrush:a.a.default,brushControlsContext:"brush-controls",showBrushMode:!0,showHardnessSlider:!0,showStrengthSlider:!0,showShapes:!0};const J=Object(T.c)(Object(V.a)(Object(l.b)((function(e){var t,n;const r=f.getActiveBrush(e),s=f.getCurBrushInfo(e),a=s.effect,o=f.doesBrushTargetEffectMask(e,a),i=f.getIsSdkProviderActive(e),l=r.props.color,c=Object(u.round)(function(e){return 100*Math.abs(e)/255}(l.a),2),h=Object(u.round)(100*r.props.hardness,2),{distance:d}=f.getCamera(e),p=K(r.props.diameter),b=r.props,g=b.spacing,m=b.angleDegrees,S=b.shape,C=s.eraseChecked;let x=0,k=null,v=null;a&&(x=o?a.mask.strokes.length:null!==(n=null===(t=a.attrs.strokes)||void 0===t?void 0:t.length)&&void 0!==n?n:0,k=a.id,v=a.type);const E=0===x;return{distance:d,brushColor:l,brushSize:p,brushHardness:h,brushStrength:c,brushSpacing:g,brushAngleDegrees:m,brushShape:S,brushAlpha:l.a,eraseChecked:C,noStrokes:E,effectId:k,effectType:v,doesBrushTargetEffectMask:o,isSdkProviderActive:i}}),(function(e){return{onChangeSize:Object(u.partial)(N,e),onChangeHardness:Object(u.partial)(Z,e),onChangeStrength:(t,n)=>{const r=t*function(e){return e/100*255}(n);e(S.b.ux.setBrushStrength(r))},onChangeShape:t=>{const n=t===x.l.circle?x.m.softRoundBrush:x.m.shapedBrush;e(S.b.ux.changeBrushType(n)),e(S.b.ux.setBrushShape(t))},onChangeRotation:(t,n)=>{e(S.b.ux.setBrushRotation(n))},onChangeSpacing:(t,n)=>{e(S.b.ux.setBrushSpacing(n))},onChangeBrush:(t,n,r)=>{t&&n?e(S.b.scene.invertMask(r)):(e(S.b.ux.toggleBrushPolarity()),e(S.b.undo.softCommit()))},startMaskPreview:(t,n)=>{e(S.b.ux.startMaskPreview(t,n))},endMaskPreview:()=>{e(S.b.ux.endMaskPreview())},setActiveBrush:t=>{e(S.b.ux.setActiveBrush(t))}}}))(L)))},Jm8X:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("q1tI"),s=n("dJhg");function a({children:e}){return r.createElement("div",{className:s.a.feature_row},e)}},Qrk7:function(e,t,n){"use strict";var r=n("JPst"),s=n.n(r)()((function(e){return e[1]}));s.push([e.i,".src-editor-components-controls--brush_controls-module-brush_preview-QEFZA{pointer-events:none;position:fixed;z-index:210;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.src-editor-components-controls--brush_controls-module-brush_shape_option-21FT8{margin:auto;border-radius:50%;width:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#f3f4f5;fill:#85888f}.src-editor-components-controls--brush_controls-module-brush_shape_option-21FT8.src-editor-components-controls--brush_controls-module-checked-FDMo7{fill:#292f38}.src-editor-components-controls--brush_controls-module-pro_badge-EGaTZ{position:absolute;right:0px;top:-2px}",""]),s.locals={zindexCanvasTooltip:"10",brush_preview:"src-editor-components-controls--brush_controls-module-brush_preview-QEFZA",brush_shape_option:"src-editor-components-controls--brush_controls-module-brush_shape_option-21FT8",checked:"src-editor-components-controls--brush_controls-module-checked-FDMo7",pro_badge:"src-editor-components-controls--brush_controls-module-pro_badge-EGaTZ"},t.a=s},RJns:function(e,t,n){"use strict";n.r(t),n.d(t,"CloneFxPanelUnconnected",(function(){return A}));var r=n("Gkqz"),s=n("q1tI"),a=n("hrAu"),o=n("bBtN"),i=n("b340"),l=n("ZIGy"),c=n("FWLE"),h=n("MOMi"),u=n("kgbO"),d=n("/BrD"),p=n("/MKj"),b=n("FL8F"),g=n("jpIK"),m=n("xlbG"),f=n("VPDm"),S=n("x+OS"),C=n("lAjK"),x=n("+N/7"),k=n("GZZW"),v=n("1Kt6"),E=n("Jm8X"),M=n("l75k"),B=n("Hg4B"),O=n("kUL8"),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const _=B.c.clone,j=_+"_brush_controls";class A extends s.Component{constructor(){super(...arguments),this.updateMode=e=>{const{updateFxAttr:t,changeEraserMode:n,uiFxAttrs:r}=this.props;r.cloneMode===h.n.setSource&&e===d.b.erase&&t("cloneMode",h.n.drawing),n(e===d.b.erase)},this.handleSetSource=()=>{const{changeEraserMode:e,eraser:t,updateFxAttr:n}=this.props;t&&e(!1),n("cloneMode",h.n.setSource)},this.isSetSourceInUse=()=>{const{cloneMode:e}=this.props.uiFxAttrs;return!(e===h.n.setSource)},this.renderSetSource=()=>{const e=this.isSetSourceInUse(),t={name:"setSource",className:x.a.cloneSetSource,onClick:this.handleSetSource};return e?s.createElement(c.i,Object.assign({},t,{label:Object(r.b)("effect","set_source")})):s.createElement(c.h,Object.assign({},t,{label:Object(r.b)("effect","set_source")}))}}render(){const e=this.props,{uiFxAttrs:t,onOpenPanel:n,onApply:o,disabled:c,eraser:h,changeEraserMode:u,updateFxAttr:p}=e,b=y(e,["uiFxAttrs","onOpenPanel","onApply","disabled","eraser","changeEraserMode","updateFxAttr"]);return s.createElement(a.a,Object.assign({},b,{onOpen:n,onApply:o,title:Object(r.b)("effect","clone"),panelId:_,showMaskButton:!1,disabled:c}),s.createElement(E.a,null,this.renderSetSource()),s.createElement(m.a,{variant:f.c.underliner,name:"mode",label:h?Object(r.b)("editor","erase"):Object(r.b)("editor","brush"),defaultTab:h?d.b.erase:d.b.paint,onChange:this.updateMode,tabs:[{label:s.createElement(S.default,null),key:d.b.erase,disabled:!t.isEraserEnabled},{label:s.createElement(C.default,null),key:d.b.paint}]}),s.createElement(O.a,{sectionLabel:j},s.createElement(d.a,{showBrushMode:!1,initialBrushValues:Object(M.a)(30,50,100)})),s.createElement(v.a,null),s.createElement(i.a,{name:"fade",label:Object(r.b)("effect","fade"),min:k.m,max:k.d,formatter:l.a.roundedPercent,onChange:p}))}}const D=Object(p.b)((function(e){const t=g.getSelectedNodeIds(e),n=g.getActiveBrush(e);return{disabled:1!==t.length,eraser:n.props.blendMode===h.k.reverseSubtract}}),(function(e,t){return{onOpenPanel:()=>{t.onOpen()},onApply:()=>{e(b.b.ux.changeBrushType(h.m.softRoundBrush)),t.onApply()},changeEraserMode:t=>{e(b.b.ux.setBrushBlendMode(t?h.k.reverseSubtract:h.k.add))}}}));t.default=Object(o.a)(D(A),{effectType:h.r.Clone,panelId:_,fxAttrDefaults:u.b,getUiFxAttrs:function(e){const{cloneMode:t,fade:n,reticleOffset:r}=e;return{cloneMode:t,fade:n,isEraserEnabled:!!r}}})},g0vd:function(e,t,n){"use strict";var r=n("LboF"),s=n.n(r),a=n("Qrk7"),o={insert:"head",singleton:!1};s()(a.a,o);t.a=a.a.locals||{}},l75k:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("MOMi"),s=n("xM47");const a={angleDegrees:0,shape:r.l.circle,spacing:s.c};function o(e,t,n){return Object.assign(Object.assign({},a),{hardness:t,strength:n,size:e})}function i(e,t,n,r){const s=Math.sqrt(e[0]*e[1])*t;return Object.assign(Object.assign({},a),{hardness:n,strength:r,size:s})}}}]);
//# sourceMappingURL=editor-clone-panel.271f3030dfd6f6fe4dc7.bundle.js.map